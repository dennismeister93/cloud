{
  "id": "633306c8-3ea8-4adc-b4b1-3408bab3a01f",
  "prevId": "9cd9eee9-7c81-4daa-9c07-96156586eb4c",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.agent_configs": {
      "name": "agent_configs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "owned_by_organization_id": {
          "name": "owned_by_organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "owned_by_user_id": {
          "name": "owned_by_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "agent_type": {
          "name": "agent_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "platform": {
          "name": "platform",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "config": {
          "name": "config",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        },
        "is_enabled": {
          "name": "is_enabled",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_by": {
          "name": "created_by",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "IDX_agent_configs_org_id": {
          "name": "IDX_agent_configs_org_id",
          "columns": [
            {
              "expression": "owned_by_organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_agent_configs_owned_by_user_id": {
          "name": "IDX_agent_configs_owned_by_user_id",
          "columns": [
            {
              "expression": "owned_by_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_agent_configs_agent_type": {
          "name": "IDX_agent_configs_agent_type",
          "columns": [
            {
              "expression": "agent_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_agent_configs_platform": {
          "name": "IDX_agent_configs_platform",
          "columns": [
            {
              "expression": "platform",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "agent_configs_owned_by_organization_id_organizations_id_fk": {
          "name": "agent_configs_owned_by_organization_id_organizations_id_fk",
          "tableFrom": "agent_configs",
          "tableTo": "organizations",
          "columnsFrom": [
            "owned_by_organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "agent_configs_owned_by_user_id_kilocode_users_id_fk": {
          "name": "agent_configs_owned_by_user_id_kilocode_users_id_fk",
          "tableFrom": "agent_configs",
          "tableTo": "kilocode_users",
          "columnsFrom": [
            "owned_by_user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "UQ_agent_configs_org_agent_platform": {
          "name": "UQ_agent_configs_org_agent_platform",
          "nullsNotDistinct": false,
          "columns": [
            "owned_by_organization_id",
            "agent_type",
            "platform"
          ]
        },
        "UQ_agent_configs_user_agent_platform": {
          "name": "UQ_agent_configs_user_agent_platform",
          "nullsNotDistinct": false,
          "columns": [
            "owned_by_user_id",
            "agent_type",
            "platform"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "agent_configs_owner_check": {
          "name": "agent_configs_owner_check",
          "value": "(\n        (\"agent_configs\".\"owned_by_user_id\" IS NOT NULL AND \"agent_configs\".\"owned_by_organization_id\" IS NULL) OR\n        (\"agent_configs\".\"owned_by_user_id\" IS NULL AND \"agent_configs\".\"owned_by_organization_id\" IS NOT NULL)\n      )"
        },
        "agent_configs_agent_type_check": {
          "name": "agent_configs_agent_type_check",
          "value": "\"agent_configs\".\"agent_type\" IN ('code_review', 'auto_triage', 'auto_fix', 'security_scan')"
        }
      },
      "isRLSEnabled": false
    },
    "public.agent_environment_profile_commands": {
      "name": "agent_environment_profile_commands",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "profile_id": {
          "name": "profile_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "sequence": {
          "name": "sequence",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "command": {
          "name": "command",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "IDX_agent_env_profile_commands_profile_id": {
          "name": "IDX_agent_env_profile_commands_profile_id",
          "columns": [
            {
              "expression": "profile_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "agent_environment_profile_commands_profile_id_agent_environment_profiles_id_fk": {
          "name": "agent_environment_profile_commands_profile_id_agent_environment_profiles_id_fk",
          "tableFrom": "agent_environment_profile_commands",
          "tableTo": "agent_environment_profiles",
          "columnsFrom": [
            "profile_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "UQ_agent_env_profile_commands_profile_sequence": {
          "name": "UQ_agent_env_profile_commands_profile_sequence",
          "nullsNotDistinct": false,
          "columns": [
            "profile_id",
            "sequence"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.agent_environment_profile_vars": {
      "name": "agent_environment_profile_vars",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "profile_id": {
          "name": "profile_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "key": {
          "name": "key",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "value": {
          "name": "value",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "is_secret": {
          "name": "is_secret",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "IDX_agent_env_profile_vars_profile_id": {
          "name": "IDX_agent_env_profile_vars_profile_id",
          "columns": [
            {
              "expression": "profile_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "agent_environment_profile_vars_profile_id_agent_environment_profiles_id_fk": {
          "name": "agent_environment_profile_vars_profile_id_agent_environment_profiles_id_fk",
          "tableFrom": "agent_environment_profile_vars",
          "tableTo": "agent_environment_profiles",
          "columnsFrom": [
            "profile_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "UQ_agent_env_profile_vars_profile_key": {
          "name": "UQ_agent_env_profile_vars_profile_key",
          "nullsNotDistinct": false,
          "columns": [
            "profile_id",
            "key"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.agent_environment_profiles": {
      "name": "agent_environment_profiles",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "owned_by_organization_id": {
          "name": "owned_by_organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "owned_by_user_id": {
          "name": "owned_by_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "is_default": {
          "name": "is_default",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "UQ_agent_env_profiles_org_name": {
          "name": "UQ_agent_env_profiles_org_name",
          "columns": [
            {
              "expression": "owned_by_organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"agent_environment_profiles\".\"owned_by_organization_id\" is not null",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "UQ_agent_env_profiles_user_name": {
          "name": "UQ_agent_env_profiles_user_name",
          "columns": [
            {
              "expression": "owned_by_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"agent_environment_profiles\".\"owned_by_user_id\" is not null",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "UQ_agent_env_profiles_org_default": {
          "name": "UQ_agent_env_profiles_org_default",
          "columns": [
            {
              "expression": "owned_by_organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"agent_environment_profiles\".\"is_default\" = true AND \"agent_environment_profiles\".\"owned_by_organization_id\" IS NOT NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "UQ_agent_env_profiles_user_default": {
          "name": "UQ_agent_env_profiles_user_default",
          "columns": [
            {
              "expression": "owned_by_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"agent_environment_profiles\".\"is_default\" = true AND \"agent_environment_profiles\".\"owned_by_user_id\" IS NOT NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_agent_env_profiles_org_id": {
          "name": "IDX_agent_env_profiles_org_id",
          "columns": [
            {
              "expression": "owned_by_organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_agent_env_profiles_user_id": {
          "name": "IDX_agent_env_profiles_user_id",
          "columns": [
            {
              "expression": "owned_by_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "agent_environment_profiles_owned_by_organization_id_organizations_id_fk": {
          "name": "agent_environment_profiles_owned_by_organization_id_organizations_id_fk",
          "tableFrom": "agent_environment_profiles",
          "tableTo": "organizations",
          "columnsFrom": [
            "owned_by_organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "agent_environment_profiles_owned_by_user_id_kilocode_users_id_fk": {
          "name": "agent_environment_profiles_owned_by_user_id_kilocode_users_id_fk",
          "tableFrom": "agent_environment_profiles",
          "tableTo": "kilocode_users",
          "columnsFrom": [
            "owned_by_user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "agent_env_profiles_owner_check": {
          "name": "agent_env_profiles_owner_check",
          "value": "(\n        (\"agent_environment_profiles\".\"owned_by_user_id\" IS NOT NULL AND \"agent_environment_profiles\".\"owned_by_organization_id\" IS NULL) OR\n        (\"agent_environment_profiles\".\"owned_by_user_id\" IS NULL AND \"agent_environment_profiles\".\"owned_by_organization_id\" IS NOT NULL)\n      )"
        }
      },
      "isRLSEnabled": false
    },
    "public.app_builder_messages": {
      "name": "app_builder_messages",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "project_id": {
          "name": "project_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "data": {
          "name": "data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "sequence": {
          "name": "sequence",
          "type": "serial",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "IDX_app_builder_messages_project_id": {
          "name": "IDX_app_builder_messages_project_id",
          "columns": [
            {
              "expression": "project_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_app_builder_messages_sequence": {
          "name": "IDX_app_builder_messages_sequence",
          "columns": [
            {
              "expression": "sequence",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "app_builder_messages_project_id_app_builder_projects_id_fk": {
          "name": "app_builder_messages_project_id_app_builder_projects_id_fk",
          "tableFrom": "app_builder_messages",
          "tableTo": "app_builder_projects",
          "columnsFrom": [
            "project_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "UQ_app_builder_messages_project_created_at": {
          "name": "UQ_app_builder_messages_project_created_at",
          "nullsNotDistinct": false,
          "columns": [
            "project_id",
            "created_at"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.app_builder_projects": {
      "name": "app_builder_projects",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "created_by_user_id": {
          "name": "created_by_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "owned_by_user_id": {
          "name": "owned_by_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "owned_by_organization_id": {
          "name": "owned_by_organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "session_id": {
          "name": "session_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "model_id": {
          "name": "model_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "template": {
          "name": "template",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "deployment_id": {
          "name": "deployment_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "last_message_at": {
          "name": "last_message_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "IDX_app_builder_projects_created_by_user_id": {
          "name": "IDX_app_builder_projects_created_by_user_id",
          "columns": [
            {
              "expression": "created_by_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_app_builder_projects_owned_by_user_id": {
          "name": "IDX_app_builder_projects_owned_by_user_id",
          "columns": [
            {
              "expression": "owned_by_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_app_builder_projects_owned_by_organization_id": {
          "name": "IDX_app_builder_projects_owned_by_organization_id",
          "columns": [
            {
              "expression": "owned_by_organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_app_builder_projects_created_at": {
          "name": "IDX_app_builder_projects_created_at",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_app_builder_projects_last_message_at": {
          "name": "IDX_app_builder_projects_last_message_at",
          "columns": [
            {
              "expression": "last_message_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "app_builder_projects_owned_by_user_id_kilocode_users_id_fk": {
          "name": "app_builder_projects_owned_by_user_id_kilocode_users_id_fk",
          "tableFrom": "app_builder_projects",
          "tableTo": "kilocode_users",
          "columnsFrom": [
            "owned_by_user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "app_builder_projects_owned_by_organization_id_organizations_id_fk": {
          "name": "app_builder_projects_owned_by_organization_id_organizations_id_fk",
          "tableFrom": "app_builder_projects",
          "tableTo": "organizations",
          "columnsFrom": [
            "owned_by_organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "app_builder_projects_deployment_id_deployments_id_fk": {
          "name": "app_builder_projects_deployment_id_deployments_id_fk",
          "tableFrom": "app_builder_projects",
          "tableTo": "deployments",
          "columnsFrom": [
            "deployment_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "app_builder_projects_owner_check": {
          "name": "app_builder_projects_owner_check",
          "value": "(\n        (\"app_builder_projects\".\"owned_by_user_id\" IS NOT NULL AND \"app_builder_projects\".\"owned_by_organization_id\" IS NULL) OR\n        (\"app_builder_projects\".\"owned_by_user_id\" IS NULL AND \"app_builder_projects\".\"owned_by_organization_id\" IS NOT NULL)\n      )"
        }
      },
      "isRLSEnabled": false
    },
    "public.app_reported_messages": {
      "name": "app_reported_messages",
      "schema": "",
      "columns": {
        "report_id": {
          "name": "report_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "report_type": {
          "name": "report_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "signature": {
          "name": "signature",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "message": {
          "name": "message",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "cli_session_id": {
          "name": "cli_session_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "mode": {
          "name": "mode",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "model": {
          "name": "model",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {},
      "foreignKeys": {
        "app_reported_messages_cli_session_id_cli_sessions_session_id_fk": {
          "name": "app_reported_messages_cli_session_id_cli_sessions_session_id_fk",
          "tableFrom": "app_reported_messages",
          "tableTo": "cli_sessions",
          "columnsFrom": [
            "cli_session_id"
          ],
          "columnsTo": [
            "session_id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.auto_fix_tickets": {
      "name": "auto_fix_tickets",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "owned_by_organization_id": {
          "name": "owned_by_organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "owned_by_user_id": {
          "name": "owned_by_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "platform_integration_id": {
          "name": "platform_integration_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "triage_ticket_id": {
          "name": "triage_ticket_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "platform": {
          "name": "platform",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'github'"
        },
        "repo_full_name": {
          "name": "repo_full_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "issue_number": {
          "name": "issue_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "issue_url": {
          "name": "issue_url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "issue_title": {
          "name": "issue_title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "issue_body": {
          "name": "issue_body",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "issue_author": {
          "name": "issue_author",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "issue_labels": {
          "name": "issue_labels",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'"
        },
        "classification": {
          "name": "classification",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "confidence": {
          "name": "confidence",
          "type": "numeric(3, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "intent_summary": {
          "name": "intent_summary",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "related_files": {
          "name": "related_files",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "session_id": {
          "name": "session_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "cli_session_id": {
          "name": "cli_session_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "pr_number": {
          "name": "pr_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "pr_url": {
          "name": "pr_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "pr_branch": {
          "name": "pr_branch",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "UQ_auto_fix_tickets_repo_issue": {
          "name": "UQ_auto_fix_tickets_repo_issue",
          "columns": [
            {
              "expression": "repo_full_name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "issue_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_auto_fix_tickets_owned_by_org": {
          "name": "IDX_auto_fix_tickets_owned_by_org",
          "columns": [
            {
              "expression": "owned_by_organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_auto_fix_tickets_owned_by_user": {
          "name": "IDX_auto_fix_tickets_owned_by_user",
          "columns": [
            {
              "expression": "owned_by_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_auto_fix_tickets_status": {
          "name": "IDX_auto_fix_tickets_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_auto_fix_tickets_created_at": {
          "name": "IDX_auto_fix_tickets_created_at",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_auto_fix_tickets_triage_ticket_id": {
          "name": "IDX_auto_fix_tickets_triage_ticket_id",
          "columns": [
            {
              "expression": "triage_ticket_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_auto_fix_tickets_session_id": {
          "name": "IDX_auto_fix_tickets_session_id",
          "columns": [
            {
              "expression": "session_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "auto_fix_tickets_owned_by_organization_id_organizations_id_fk": {
          "name": "auto_fix_tickets_owned_by_organization_id_organizations_id_fk",
          "tableFrom": "auto_fix_tickets",
          "tableTo": "organizations",
          "columnsFrom": [
            "owned_by_organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "auto_fix_tickets_owned_by_user_id_kilocode_users_id_fk": {
          "name": "auto_fix_tickets_owned_by_user_id_kilocode_users_id_fk",
          "tableFrom": "auto_fix_tickets",
          "tableTo": "kilocode_users",
          "columnsFrom": [
            "owned_by_user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "auto_fix_tickets_platform_integration_id_platform_integrations_id_fk": {
          "name": "auto_fix_tickets_platform_integration_id_platform_integrations_id_fk",
          "tableFrom": "auto_fix_tickets",
          "tableTo": "platform_integrations",
          "columnsFrom": [
            "platform_integration_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "auto_fix_tickets_triage_ticket_id_auto_triage_tickets_id_fk": {
          "name": "auto_fix_tickets_triage_ticket_id_auto_triage_tickets_id_fk",
          "tableFrom": "auto_fix_tickets",
          "tableTo": "auto_triage_tickets",
          "columnsFrom": [
            "triage_ticket_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "auto_fix_tickets_cli_session_id_cli_sessions_session_id_fk": {
          "name": "auto_fix_tickets_cli_session_id_cli_sessions_session_id_fk",
          "tableFrom": "auto_fix_tickets",
          "tableTo": "cli_sessions",
          "columnsFrom": [
            "cli_session_id"
          ],
          "columnsTo": [
            "session_id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "auto_fix_tickets_owner_check": {
          "name": "auto_fix_tickets_owner_check",
          "value": "(\n        (\"auto_fix_tickets\".\"owned_by_user_id\" IS NOT NULL AND \"auto_fix_tickets\".\"owned_by_organization_id\" IS NULL) OR\n        (\"auto_fix_tickets\".\"owned_by_user_id\" IS NULL AND \"auto_fix_tickets\".\"owned_by_organization_id\" IS NOT NULL)\n      )"
        },
        "auto_fix_tickets_status_check": {
          "name": "auto_fix_tickets_status_check",
          "value": "\"auto_fix_tickets\".\"status\" IN ('pending', 'running', 'completed', 'failed', 'cancelled')"
        },
        "auto_fix_tickets_classification_check": {
          "name": "auto_fix_tickets_classification_check",
          "value": "\"auto_fix_tickets\".\"classification\" IN ('bug', 'feature', 'question', 'unclear')"
        },
        "auto_fix_tickets_confidence_check": {
          "name": "auto_fix_tickets_confidence_check",
          "value": "\"auto_fix_tickets\".\"confidence\" >= 0 AND \"auto_fix_tickets\".\"confidence\" <= 1"
        }
      },
      "isRLSEnabled": false
    },
    "public.auto_top_up_configs": {
      "name": "auto_top_up_configs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "owned_by_user_id": {
          "name": "owned_by_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "owned_by_organization_id": {
          "name": "owned_by_organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "created_by_user_id": {
          "name": "created_by_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "stripe_payment_method_id": {
          "name": "stripe_payment_method_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "amount_cents": {
          "name": "amount_cents",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 5000
        },
        "last_auto_top_up_at": {
          "name": "last_auto_top_up_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "attempt_started_at": {
          "name": "attempt_started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "disabled_reason": {
          "name": "disabled_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "UQ_auto_top_up_configs_owned_by_user_id": {
          "name": "UQ_auto_top_up_configs_owned_by_user_id",
          "columns": [
            {
              "expression": "owned_by_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"auto_top_up_configs\".\"owned_by_user_id\" IS NOT NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "UQ_auto_top_up_configs_owned_by_organization_id": {
          "name": "UQ_auto_top_up_configs_owned_by_organization_id",
          "columns": [
            {
              "expression": "owned_by_organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"auto_top_up_configs\".\"owned_by_organization_id\" IS NOT NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "auto_top_up_configs_owned_by_user_id_kilocode_users_id_fk": {
          "name": "auto_top_up_configs_owned_by_user_id_kilocode_users_id_fk",
          "tableFrom": "auto_top_up_configs",
          "tableTo": "kilocode_users",
          "columnsFrom": [
            "owned_by_user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "auto_top_up_configs_owned_by_organization_id_organizations_id_fk": {
          "name": "auto_top_up_configs_owned_by_organization_id_organizations_id_fk",
          "tableFrom": "auto_top_up_configs",
          "tableTo": "organizations",
          "columnsFrom": [
            "owned_by_organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "auto_top_up_configs_exactly_one_owner": {
          "name": "auto_top_up_configs_exactly_one_owner",
          "value": "(\"auto_top_up_configs\".\"owned_by_user_id\" IS NOT NULL AND \"auto_top_up_configs\".\"owned_by_organization_id\" IS NULL) OR (\"auto_top_up_configs\".\"owned_by_user_id\" IS NULL AND \"auto_top_up_configs\".\"owned_by_organization_id\" IS NOT NULL)"
        }
      },
      "isRLSEnabled": false
    },
    "public.auto_triage_tickets": {
      "name": "auto_triage_tickets",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "owned_by_organization_id": {
          "name": "owned_by_organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "owned_by_user_id": {
          "name": "owned_by_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "platform_integration_id": {
          "name": "platform_integration_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "platform": {
          "name": "platform",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'github'"
        },
        "repo_full_name": {
          "name": "repo_full_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "issue_number": {
          "name": "issue_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "issue_url": {
          "name": "issue_url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "issue_title": {
          "name": "issue_title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "issue_body": {
          "name": "issue_body",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "issue_author": {
          "name": "issue_author",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "issue_type": {
          "name": "issue_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "issue_labels": {
          "name": "issue_labels",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false,
          "default": "'{}'"
        },
        "classification": {
          "name": "classification",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "confidence": {
          "name": "confidence",
          "type": "numeric(3, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "intent_summary": {
          "name": "intent_summary",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "related_files": {
          "name": "related_files",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "is_duplicate": {
          "name": "is_duplicate",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "duplicate_of_ticket_id": {
          "name": "duplicate_of_ticket_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "similarity_score": {
          "name": "similarity_score",
          "type": "numeric(3, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "qdrant_point_id": {
          "name": "qdrant_point_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "session_id": {
          "name": "session_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "should_auto_fix": {
          "name": "should_auto_fix",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "action_taken": {
          "name": "action_taken",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "action_metadata": {
          "name": "action_metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "UQ_auto_triage_tickets_repo_issue": {
          "name": "UQ_auto_triage_tickets_repo_issue",
          "columns": [
            {
              "expression": "repo_full_name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "issue_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_auto_triage_tickets_owned_by_org": {
          "name": "IDX_auto_triage_tickets_owned_by_org",
          "columns": [
            {
              "expression": "owned_by_organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_auto_triage_tickets_owned_by_user": {
          "name": "IDX_auto_triage_tickets_owned_by_user",
          "columns": [
            {
              "expression": "owned_by_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_auto_triage_tickets_status": {
          "name": "IDX_auto_triage_tickets_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_auto_triage_tickets_created_at": {
          "name": "IDX_auto_triage_tickets_created_at",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_auto_triage_tickets_qdrant_point_id": {
          "name": "IDX_auto_triage_tickets_qdrant_point_id",
          "columns": [
            {
              "expression": "qdrant_point_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_auto_triage_tickets_owner_status_created": {
          "name": "IDX_auto_triage_tickets_owner_status_created",
          "columns": [
            {
              "expression": "owned_by_organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_auto_triage_tickets_user_status_created": {
          "name": "IDX_auto_triage_tickets_user_status_created",
          "columns": [
            {
              "expression": "owned_by_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_auto_triage_tickets_repo_classification": {
          "name": "IDX_auto_triage_tickets_repo_classification",
          "columns": [
            {
              "expression": "repo_full_name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "classification",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "auto_triage_tickets_owned_by_organization_id_organizations_id_fk": {
          "name": "auto_triage_tickets_owned_by_organization_id_organizations_id_fk",
          "tableFrom": "auto_triage_tickets",
          "tableTo": "organizations",
          "columnsFrom": [
            "owned_by_organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "auto_triage_tickets_owned_by_user_id_kilocode_users_id_fk": {
          "name": "auto_triage_tickets_owned_by_user_id_kilocode_users_id_fk",
          "tableFrom": "auto_triage_tickets",
          "tableTo": "kilocode_users",
          "columnsFrom": [
            "owned_by_user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "auto_triage_tickets_platform_integration_id_platform_integrations_id_fk": {
          "name": "auto_triage_tickets_platform_integration_id_platform_integrations_id_fk",
          "tableFrom": "auto_triage_tickets",
          "tableTo": "platform_integrations",
          "columnsFrom": [
            "platform_integration_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "auto_triage_tickets_duplicate_of_ticket_id_auto_triage_tickets_id_fk": {
          "name": "auto_triage_tickets_duplicate_of_ticket_id_auto_triage_tickets_id_fk",
          "tableFrom": "auto_triage_tickets",
          "tableTo": "auto_triage_tickets",
          "columnsFrom": [
            "duplicate_of_ticket_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "auto_triage_tickets_owner_check": {
          "name": "auto_triage_tickets_owner_check",
          "value": "(\n        (\"auto_triage_tickets\".\"owned_by_user_id\" IS NOT NULL AND \"auto_triage_tickets\".\"owned_by_organization_id\" IS NULL) OR\n        (\"auto_triage_tickets\".\"owned_by_user_id\" IS NULL AND \"auto_triage_tickets\".\"owned_by_organization_id\" IS NOT NULL)\n      )"
        },
        "auto_triage_tickets_issue_type_check": {
          "name": "auto_triage_tickets_issue_type_check",
          "value": "\"auto_triage_tickets\".\"issue_type\" IN ('issue', 'pull_request')"
        },
        "auto_triage_tickets_classification_check": {
          "name": "auto_triage_tickets_classification_check",
          "value": "\"auto_triage_tickets\".\"classification\" IN ('bug', 'feature', 'question', 'duplicate', 'unclear')"
        },
        "auto_triage_tickets_confidence_check": {
          "name": "auto_triage_tickets_confidence_check",
          "value": "\"auto_triage_tickets\".\"confidence\" >= 0 AND \"auto_triage_tickets\".\"confidence\" <= 1"
        },
        "auto_triage_tickets_similarity_score_check": {
          "name": "auto_triage_tickets_similarity_score_check",
          "value": "\"auto_triage_tickets\".\"similarity_score\" >= 0 AND \"auto_triage_tickets\".\"similarity_score\" <= 1"
        },
        "auto_triage_tickets_status_check": {
          "name": "auto_triage_tickets_status_check",
          "value": "\"auto_triage_tickets\".\"status\" IN ('pending', 'analyzing', 'actioned', 'failed', 'skipped')"
        },
        "auto_triage_tickets_action_taken_check": {
          "name": "auto_triage_tickets_action_taken_check",
          "value": "\"auto_triage_tickets\".\"action_taken\" IN ('pr_created', 'comment_posted', 'closed_duplicate', 'needs_clarification')"
        }
      },
      "isRLSEnabled": false
    },
    "public.byok_api_keys": {
      "name": "byok_api_keys",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "kilo_user_id": {
          "name": "kilo_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "provider_id": {
          "name": "provider_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "encrypted_api_key": {
          "name": "encrypted_api_key",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_by": {
          "name": "created_by",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "IDX_byok_api_keys_organization_id": {
          "name": "IDX_byok_api_keys_organization_id",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_byok_api_keys_kilo_user_id": {
          "name": "IDX_byok_api_keys_kilo_user_id",
          "columns": [
            {
              "expression": "kilo_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_byok_api_keys_provider_id": {
          "name": "IDX_byok_api_keys_provider_id",
          "columns": [
            {
              "expression": "provider_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "byok_api_keys_organization_id_organizations_id_fk": {
          "name": "byok_api_keys_organization_id_organizations_id_fk",
          "tableFrom": "byok_api_keys",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "byok_api_keys_kilo_user_id_kilocode_users_id_fk": {
          "name": "byok_api_keys_kilo_user_id_kilocode_users_id_fk",
          "tableFrom": "byok_api_keys",
          "tableTo": "kilocode_users",
          "columnsFrom": [
            "kilo_user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "UQ_byok_api_keys_org_provider": {
          "name": "UQ_byok_api_keys_org_provider",
          "nullsNotDistinct": false,
          "columns": [
            "organization_id",
            "provider_id"
          ]
        },
        "UQ_byok_api_keys_user_provider": {
          "name": "UQ_byok_api_keys_user_provider",
          "nullsNotDistinct": false,
          "columns": [
            "kilo_user_id",
            "provider_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "byok_api_keys_owner_check": {
          "name": "byok_api_keys_owner_check",
          "value": "(\n        (\"byok_api_keys\".\"kilo_user_id\" IS NOT NULL AND \"byok_api_keys\".\"organization_id\" IS NULL) OR\n        (\"byok_api_keys\".\"kilo_user_id\" IS NULL AND \"byok_api_keys\".\"organization_id\" IS NOT NULL)\n      )"
        }
      },
      "isRLSEnabled": false
    },
    "public.cli_sessions": {
      "name": "cli_sessions",
      "schema": "",
      "columns": {
        "session_id": {
          "name": "session_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "kilo_user_id": {
          "name": "kilo_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_on_platform": {
          "name": "created_on_platform",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'unknown'"
        },
        "api_conversation_history_blob_url": {
          "name": "api_conversation_history_blob_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "task_metadata_blob_url": {
          "name": "task_metadata_blob_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ui_messages_blob_url": {
          "name": "ui_messages_blob_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "git_state_blob_url": {
          "name": "git_state_blob_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "git_url": {
          "name": "git_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "forked_from": {
          "name": "forked_from",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "parent_session_id": {
          "name": "parent_session_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "cloud_agent_session_id": {
          "name": "cloud_agent_session_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "last_mode": {
          "name": "last_mode",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "last_model": {
          "name": "last_model",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "IDX_cli_sessions_kilo_user_id": {
          "name": "IDX_cli_sessions_kilo_user_id",
          "columns": [
            {
              "expression": "kilo_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_cli_sessions_created_at": {
          "name": "IDX_cli_sessions_created_at",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_cli_sessions_updated_at": {
          "name": "IDX_cli_sessions_updated_at",
          "columns": [
            {
              "expression": "updated_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_cli_sessions_organization_id": {
          "name": "IDX_cli_sessions_organization_id",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_cli_sessions_user_updated": {
          "name": "IDX_cli_sessions_user_updated",
          "columns": [
            {
              "expression": "kilo_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "updated_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "cli_sessions_kilo_user_id_kilocode_users_id_fk": {
          "name": "cli_sessions_kilo_user_id_kilocode_users_id_fk",
          "tableFrom": "cli_sessions",
          "tableTo": "kilocode_users",
          "columnsFrom": [
            "kilo_user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        },
        "cli_sessions_forked_from_cli_sessions_session_id_fk": {
          "name": "cli_sessions_forked_from_cli_sessions_session_id_fk",
          "tableFrom": "cli_sessions",
          "tableTo": "cli_sessions",
          "columnsFrom": [
            "forked_from"
          ],
          "columnsTo": [
            "session_id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "cli_sessions_parent_session_id_cli_sessions_session_id_fk": {
          "name": "cli_sessions_parent_session_id_cli_sessions_session_id_fk",
          "tableFrom": "cli_sessions",
          "tableTo": "cli_sessions",
          "columnsFrom": [
            "parent_session_id"
          ],
          "columnsTo": [
            "session_id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "cli_sessions_organization_id_organizations_id_fk": {
          "name": "cli_sessions_organization_id_organizations_id_fk",
          "tableFrom": "cli_sessions",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "cli_sessions_cloud_agent_session_id_unique": {
          "name": "cli_sessions_cloud_agent_session_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "cloud_agent_session_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.cli_sessions_v2": {
      "name": "cli_sessions_v2",
      "schema": "",
      "columns": {
        "session_id": {
          "name": "session_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "kilo_user_id": {
          "name": "kilo_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "public_id": {
          "name": "public_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "parent_session_id": {
          "name": "parent_session_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "cloud_agent_session_id": {
          "name": "cloud_agent_session_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_on_platform": {
          "name": "created_on_platform",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'unknown'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "IDX_cli_sessions_v2_parent_session_id_kilo_user_id": {
          "name": "IDX_cli_sessions_v2_parent_session_id_kilo_user_id",
          "columns": [
            {
              "expression": "parent_session_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "kilo_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "UQ_cli_sessions_v2_public_id": {
          "name": "UQ_cli_sessions_v2_public_id",
          "columns": [
            {
              "expression": "public_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"cli_sessions_v2\".\"public_id\" is not null",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "UQ_cli_sessions_v2_cloud_agent_session_id": {
          "name": "UQ_cli_sessions_v2_cloud_agent_session_id",
          "columns": [
            {
              "expression": "cloud_agent_session_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"cli_sessions_v2\".\"cloud_agent_session_id\" is not null",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_cli_sessions_v2_organization_id": {
          "name": "IDX_cli_sessions_v2_organization_id",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_cli_sessions_v2_kilo_user_id": {
          "name": "IDX_cli_sessions_v2_kilo_user_id",
          "columns": [
            {
              "expression": "kilo_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_cli_sessions_v2_created_at": {
          "name": "IDX_cli_sessions_v2_created_at",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "cli_sessions_v2_kilo_user_id_kilocode_users_id_fk": {
          "name": "cli_sessions_v2_kilo_user_id_kilocode_users_id_fk",
          "tableFrom": "cli_sessions_v2",
          "tableTo": "kilocode_users",
          "columnsFrom": [
            "kilo_user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        },
        "cli_sessions_v2_organization_id_organizations_id_fk": {
          "name": "cli_sessions_v2_organization_id_organizations_id_fk",
          "tableFrom": "cli_sessions_v2",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "cli_sessions_v2_parent_session_id_kilo_user_id_fk": {
          "name": "cli_sessions_v2_parent_session_id_kilo_user_id_fk",
          "tableFrom": "cli_sessions_v2",
          "tableTo": "cli_sessions_v2",
          "columnsFrom": [
            "parent_session_id",
            "kilo_user_id"
          ],
          "columnsTo": [
            "session_id",
            "kilo_user_id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "cli_sessions_v2_session_id_kilo_user_id_pk": {
          "name": "cli_sessions_v2_session_id_kilo_user_id_pk",
          "columns": [
            "session_id",
            "kilo_user_id"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.cloud_agent_code_reviews": {
      "name": "cloud_agent_code_reviews",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "owned_by_organization_id": {
          "name": "owned_by_organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "owned_by_user_id": {
          "name": "owned_by_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "platform_integration_id": {
          "name": "platform_integration_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "repo_full_name": {
          "name": "repo_full_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "pr_number": {
          "name": "pr_number",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "pr_url": {
          "name": "pr_url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "pr_title": {
          "name": "pr_title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "pr_author": {
          "name": "pr_author",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "pr_author_github_id": {
          "name": "pr_author_github_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "base_ref": {
          "name": "base_ref",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "head_ref": {
          "name": "head_ref",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "head_sha": {
          "name": "head_sha",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "session_id": {
          "name": "session_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "cli_session_id": {
          "name": "cli_session_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "UQ_cloud_agent_code_reviews_repo_pr_sha": {
          "name": "UQ_cloud_agent_code_reviews_repo_pr_sha",
          "columns": [
            {
              "expression": "repo_full_name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "pr_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "head_sha",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_cloud_agent_code_reviews_owned_by_org_id": {
          "name": "idx_cloud_agent_code_reviews_owned_by_org_id",
          "columns": [
            {
              "expression": "owned_by_organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_cloud_agent_code_reviews_owned_by_user_id": {
          "name": "idx_cloud_agent_code_reviews_owned_by_user_id",
          "columns": [
            {
              "expression": "owned_by_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_cloud_agent_code_reviews_session_id": {
          "name": "idx_cloud_agent_code_reviews_session_id",
          "columns": [
            {
              "expression": "session_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_cloud_agent_code_reviews_cli_session_id": {
          "name": "idx_cloud_agent_code_reviews_cli_session_id",
          "columns": [
            {
              "expression": "cli_session_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_cloud_agent_code_reviews_status": {
          "name": "idx_cloud_agent_code_reviews_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_cloud_agent_code_reviews_repo": {
          "name": "idx_cloud_agent_code_reviews_repo",
          "columns": [
            {
              "expression": "repo_full_name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_cloud_agent_code_reviews_pr_number": {
          "name": "idx_cloud_agent_code_reviews_pr_number",
          "columns": [
            {
              "expression": "repo_full_name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "pr_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_cloud_agent_code_reviews_created_at": {
          "name": "idx_cloud_agent_code_reviews_created_at",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_cloud_agent_code_reviews_pr_author_github_id": {
          "name": "idx_cloud_agent_code_reviews_pr_author_github_id",
          "columns": [
            {
              "expression": "pr_author_github_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "cloud_agent_code_reviews_owned_by_organization_id_organizations_id_fk": {
          "name": "cloud_agent_code_reviews_owned_by_organization_id_organizations_id_fk",
          "tableFrom": "cloud_agent_code_reviews",
          "tableTo": "organizations",
          "columnsFrom": [
            "owned_by_organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "cloud_agent_code_reviews_owned_by_user_id_kilocode_users_id_fk": {
          "name": "cloud_agent_code_reviews_owned_by_user_id_kilocode_users_id_fk",
          "tableFrom": "cloud_agent_code_reviews",
          "tableTo": "kilocode_users",
          "columnsFrom": [
            "owned_by_user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "cloud_agent_code_reviews_platform_integration_id_platform_integrations_id_fk": {
          "name": "cloud_agent_code_reviews_platform_integration_id_platform_integrations_id_fk",
          "tableFrom": "cloud_agent_code_reviews",
          "tableTo": "platform_integrations",
          "columnsFrom": [
            "platform_integration_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "cloud_agent_code_reviews_cli_session_id_cli_sessions_session_id_fk": {
          "name": "cloud_agent_code_reviews_cli_session_id_cli_sessions_session_id_fk",
          "tableFrom": "cloud_agent_code_reviews",
          "tableTo": "cli_sessions",
          "columnsFrom": [
            "cli_session_id"
          ],
          "columnsTo": [
            "session_id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "cloud_agent_code_reviews_owner_check": {
          "name": "cloud_agent_code_reviews_owner_check",
          "value": "(\n        (\"cloud_agent_code_reviews\".\"owned_by_user_id\" IS NOT NULL AND \"cloud_agent_code_reviews\".\"owned_by_organization_id\" IS NULL) OR\n        (\"cloud_agent_code_reviews\".\"owned_by_user_id\" IS NULL AND \"cloud_agent_code_reviews\".\"owned_by_organization_id\" IS NOT NULL)\n      )"
        }
      },
      "isRLSEnabled": false
    },
    "public.cloud_agent_webhook_triggers": {
      "name": "cloud_agent_webhook_triggers",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "trigger_id": {
          "name": "trigger_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "github_repo": {
          "name": "github_repo",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "profile_id": {
          "name": "profile_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "UQ_cloud_agent_webhook_triggers_user_trigger": {
          "name": "UQ_cloud_agent_webhook_triggers_user_trigger",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "trigger_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"cloud_agent_webhook_triggers\".\"user_id\" is not null",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "UQ_cloud_agent_webhook_triggers_org_trigger": {
          "name": "UQ_cloud_agent_webhook_triggers_org_trigger",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "trigger_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"cloud_agent_webhook_triggers\".\"organization_id\" is not null",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_cloud_agent_webhook_triggers_user": {
          "name": "IDX_cloud_agent_webhook_triggers_user",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_cloud_agent_webhook_triggers_org": {
          "name": "IDX_cloud_agent_webhook_triggers_org",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_cloud_agent_webhook_triggers_active": {
          "name": "IDX_cloud_agent_webhook_triggers_active",
          "columns": [
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_cloud_agent_webhook_triggers_profile": {
          "name": "IDX_cloud_agent_webhook_triggers_profile",
          "columns": [
            {
              "expression": "profile_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "cloud_agent_webhook_triggers_user_id_kilocode_users_id_fk": {
          "name": "cloud_agent_webhook_triggers_user_id_kilocode_users_id_fk",
          "tableFrom": "cloud_agent_webhook_triggers",
          "tableTo": "kilocode_users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "cloud_agent_webhook_triggers_organization_id_organizations_id_fk": {
          "name": "cloud_agent_webhook_triggers_organization_id_organizations_id_fk",
          "tableFrom": "cloud_agent_webhook_triggers",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "cloud_agent_webhook_triggers_profile_id_agent_environment_profiles_id_fk": {
          "name": "cloud_agent_webhook_triggers_profile_id_agent_environment_profiles_id_fk",
          "tableFrom": "cloud_agent_webhook_triggers",
          "tableTo": "agent_environment_profiles",
          "columnsFrom": [
            "profile_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "CHK_cloud_agent_webhook_triggers_owner": {
          "name": "CHK_cloud_agent_webhook_triggers_owner",
          "value": "(\n        (\"cloud_agent_webhook_triggers\".\"user_id\" IS NOT NULL AND \"cloud_agent_webhook_triggers\".\"organization_id\" IS NULL) OR\n        (\"cloud_agent_webhook_triggers\".\"user_id\" IS NULL AND \"cloud_agent_webhook_triggers\".\"organization_id\" IS NOT NULL)\n      )"
        }
      },
      "isRLSEnabled": false
    },
    "public.code_indexing_manifest": {
      "name": "code_indexing_manifest",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "kilo_user_id": {
          "name": "kilo_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "project_id": {
          "name": "project_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "git_branch": {
          "name": "git_branch",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "file_hash": {
          "name": "file_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "file_path": {
          "name": "file_path",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "chunk_count": {
          "name": "chunk_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "total_lines": {
          "name": "total_lines",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "total_ai_lines": {
          "name": "total_ai_lines",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "IDX_code_indexing_manifest_organization_id": {
          "name": "IDX_code_indexing_manifest_organization_id",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_code_indexing_manifest_kilo_user_id": {
          "name": "IDX_code_indexing_manifest_kilo_user_id",
          "columns": [
            {
              "expression": "kilo_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_code_indexing_manifest_project_id": {
          "name": "IDX_code_indexing_manifest_project_id",
          "columns": [
            {
              "expression": "project_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_code_indexing_manifest_file_hash": {
          "name": "IDX_code_indexing_manifest_file_hash",
          "columns": [
            {
              "expression": "file_hash",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_code_indexing_manifest_git_branch": {
          "name": "IDX_code_indexing_manifest_git_branch",
          "columns": [
            {
              "expression": "git_branch",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_code_indexing_manifest_created_at": {
          "name": "IDX_code_indexing_manifest_created_at",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "code_indexing_manifest_kilo_user_id_kilocode_users_id_fk": {
          "name": "code_indexing_manifest_kilo_user_id_kilocode_users_id_fk",
          "tableFrom": "code_indexing_manifest",
          "tableTo": "kilocode_users",
          "columnsFrom": [
            "kilo_user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "UQ_code_indexing_manifest_org_user_project_hash_branch": {
          "name": "UQ_code_indexing_manifest_org_user_project_hash_branch",
          "nullsNotDistinct": true,
          "columns": [
            "organization_id",
            "kilo_user_id",
            "project_id",
            "file_path",
            "git_branch"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.code_indexing_search": {
      "name": "code_indexing_search",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "kilo_user_id": {
          "name": "kilo_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "query": {
          "name": "query",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "project_id": {
          "name": "project_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "IDX_code_indexing_search_organization_id": {
          "name": "IDX_code_indexing_search_organization_id",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_code_indexing_search_kilo_user_id": {
          "name": "IDX_code_indexing_search_kilo_user_id",
          "columns": [
            {
              "expression": "kilo_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_code_indexing_search_project_id": {
          "name": "IDX_code_indexing_search_project_id",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "project_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_code_indexing_search_created_at": {
          "name": "IDX_code_indexing_search_created_at",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "code_indexing_search_kilo_user_id_kilocode_users_id_fk": {
          "name": "code_indexing_search_kilo_user_id_kilocode_users_id_fk",
          "tableFrom": "code_indexing_search",
          "tableTo": "kilocode_users",
          "columnsFrom": [
            "kilo_user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.credit_transactions": {
      "name": "credit_transactions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "kilo_user_id": {
          "name": "kilo_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "amount_microdollars": {
          "name": "amount_microdollars",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "expiration_baseline_microdollars_used": {
          "name": "expiration_baseline_microdollars_used",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "original_baseline_microdollars_used": {
          "name": "original_baseline_microdollars_used",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "is_free": {
          "name": "is_free",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "original_transaction_id": {
          "name": "original_transaction_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "stripe_payment_id": {
          "name": "stripe_payment_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "coinbase_credit_block_id": {
          "name": "coinbase_credit_block_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "credit_category": {
          "name": "credit_category",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "expiry_date": {
          "name": "expiry_date",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "check_category_uniqueness": {
          "name": "check_category_uniqueness",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        }
      },
      "indexes": {
        "IDX_credit_transactions_created_at": {
          "name": "IDX_credit_transactions_created_at",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_credit_transactions_is_free": {
          "name": "IDX_credit_transactions_is_free",
          "columns": [
            {
              "expression": "is_free",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_credit_transactions_kilo_user_id": {
          "name": "IDX_credit_transactions_kilo_user_id",
          "columns": [
            {
              "expression": "kilo_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_credit_transactions_credit_category": {
          "name": "IDX_credit_transactions_credit_category",
          "columns": [
            {
              "expression": "credit_category",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_credit_transactions_stripe_payment_id": {
          "name": "IDX_credit_transactions_stripe_payment_id",
          "columns": [
            {
              "expression": "stripe_payment_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_credit_transactions_original_transaction_id": {
          "name": "IDX_credit_transactions_original_transaction_id",
          "columns": [
            {
              "expression": "original_transaction_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_credit_transactions_coinbase_credit_block_id": {
          "name": "IDX_credit_transactions_coinbase_credit_block_id",
          "columns": [
            {
              "expression": "coinbase_credit_block_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_credit_transactions_organization_id": {
          "name": "IDX_credit_transactions_organization_id",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_credit_transactions_unique_category": {
          "name": "IDX_credit_transactions_unique_category",
          "columns": [
            {
              "expression": "kilo_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "credit_category",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"credit_transactions\".\"check_category_uniqueness\" = TRUE",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.deployment_builds": {
      "name": "deployment_builds",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "deployment_id": {
          "name": "deployment_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_deployment_builds_deployment_id": {
          "name": "idx_deployment_builds_deployment_id",
          "columns": [
            {
              "expression": "deployment_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_deployment_builds_status": {
          "name": "idx_deployment_builds_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "deployment_builds_deployment_id_deployments_id_fk": {
          "name": "deployment_builds_deployment_id_deployments_id_fk",
          "tableFrom": "deployment_builds",
          "tableTo": "deployments",
          "columnsFrom": [
            "deployment_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.deployment_env_vars": {
      "name": "deployment_env_vars",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "deployment_id": {
          "name": "deployment_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "key": {
          "name": "key",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "value": {
          "name": "value",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "is_secret": {
          "name": "is_secret",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_deployment_env_vars_deployment_id": {
          "name": "idx_deployment_env_vars_deployment_id",
          "columns": [
            {
              "expression": "deployment_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "deployment_env_vars_deployment_id_deployments_id_fk": {
          "name": "deployment_env_vars_deployment_id_deployments_id_fk",
          "tableFrom": "deployment_env_vars",
          "tableTo": "deployments",
          "columnsFrom": [
            "deployment_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "UQ_deployment_env_vars_deployment_key": {
          "name": "UQ_deployment_env_vars_deployment_key",
          "nullsNotDistinct": false,
          "columns": [
            "deployment_id",
            "key"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.deployment_events": {
      "name": "deployment_events",
      "schema": "",
      "columns": {
        "build_id": {
          "name": "build_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "event_id": {
          "name": "event_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "event_type": {
          "name": "event_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'log'"
        },
        "timestamp": {
          "name": "timestamp",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "payload": {
          "name": "payload",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "idx_deployment_events_build_id": {
          "name": "idx_deployment_events_build_id",
          "columns": [
            {
              "expression": "build_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_deployment_events_timestamp": {
          "name": "idx_deployment_events_timestamp",
          "columns": [
            {
              "expression": "timestamp",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_deployment_events_type": {
          "name": "idx_deployment_events_type",
          "columns": [
            {
              "expression": "event_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "deployment_events_build_id_deployment_builds_id_fk": {
          "name": "deployment_events_build_id_deployment_builds_id_fk",
          "tableFrom": "deployment_events",
          "tableTo": "deployment_builds",
          "columnsFrom": [
            "build_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {
        "deployment_events_build_id_event_id_pk": {
          "name": "deployment_events_build_id_event_id_pk",
          "columns": [
            "build_id",
            "event_id"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.deployment_threat_detections": {
      "name": "deployment_threat_detections",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "deployment_id": {
          "name": "deployment_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "build_id": {
          "name": "build_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "threat_type": {
          "name": "threat_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_deployment_threat_detections_deployment_id": {
          "name": "idx_deployment_threat_detections_deployment_id",
          "columns": [
            {
              "expression": "deployment_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_deployment_threat_detections_created_at": {
          "name": "idx_deployment_threat_detections_created_at",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "deployment_threat_detections_deployment_id_deployments_id_fk": {
          "name": "deployment_threat_detections_deployment_id_deployments_id_fk",
          "tableFrom": "deployment_threat_detections",
          "tableTo": "deployments",
          "columnsFrom": [
            "deployment_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "deployment_threat_detections_build_id_deployment_builds_id_fk": {
          "name": "deployment_threat_detections_build_id_deployment_builds_id_fk",
          "tableFrom": "deployment_threat_detections",
          "tableTo": "deployment_builds",
          "columnsFrom": [
            "build_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.deployments": {
      "name": "deployments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "created_by_user_id": {
          "name": "created_by_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "owned_by_user_id": {
          "name": "owned_by_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "owned_by_organization_id": {
          "name": "owned_by_organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "deployment_slug": {
          "name": "deployment_slug",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "repository_source": {
          "name": "repository_source",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "branch": {
          "name": "branch",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "deployment_url": {
          "name": "deployment_url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "platform_integration_id": {
          "name": "platform_integration_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "source_type": {
          "name": "source_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'github'"
        },
        "git_auth_token": {
          "name": "git_auth_token",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "last_deployed_at": {
          "name": "last_deployed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "last_build_id": {
          "name": "last_build_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "threat_status": {
          "name": "threat_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_deployments_owned_by_user_id": {
          "name": "idx_deployments_owned_by_user_id",
          "columns": [
            {
              "expression": "owned_by_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_deployments_owned_by_organization_id": {
          "name": "idx_deployments_owned_by_organization_id",
          "columns": [
            {
              "expression": "owned_by_organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_deployments_platform_integration_id": {
          "name": "idx_deployments_platform_integration_id",
          "columns": [
            {
              "expression": "platform_integration_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_deployments_repository_source_branch": {
          "name": "idx_deployments_repository_source_branch",
          "columns": [
            {
              "expression": "repository_source",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "branch",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_deployments_threat_status_pending": {
          "name": "idx_deployments_threat_status_pending",
          "columns": [
            {
              "expression": "threat_status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "where": "\"deployments\".\"threat_status\" = 'pending_scan'",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "deployments_owned_by_user_id_kilocode_users_id_fk": {
          "name": "deployments_owned_by_user_id_kilocode_users_id_fk",
          "tableFrom": "deployments",
          "tableTo": "kilocode_users",
          "columnsFrom": [
            "owned_by_user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "deployments_owned_by_organization_id_organizations_id_fk": {
          "name": "deployments_owned_by_organization_id_organizations_id_fk",
          "tableFrom": "deployments",
          "tableTo": "organizations",
          "columnsFrom": [
            "owned_by_organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "UQ_deployments_deployment_slug": {
          "name": "UQ_deployments_deployment_slug",
          "nullsNotDistinct": false,
          "columns": [
            "deployment_slug"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "deployments_owner_check": {
          "name": "deployments_owner_check",
          "value": "(\n        (\"deployments\".\"owned_by_user_id\" IS NOT NULL AND \"deployments\".\"owned_by_organization_id\" IS NULL) OR\n        (\"deployments\".\"owned_by_user_id\" IS NULL AND \"deployments\".\"owned_by_organization_id\" IS NOT NULL)\n      )"
        },
        "deployments_source_type_check": {
          "name": "deployments_source_type_check",
          "value": "\"deployments\".\"source_type\" IN ('github', 'git', 'app-builder')"
        }
      },
      "isRLSEnabled": false
    },
    "public.device_auth_requests": {
      "name": "device_auth_requests",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "kilo_user_id": {
          "name": "kilo_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "approved_at": {
          "name": "approved_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "user_agent": {
          "name": "user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ip_address": {
          "name": "ip_address",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "UQ_device_auth_requests_code": {
          "name": "UQ_device_auth_requests_code",
          "columns": [
            {
              "expression": "code",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_device_auth_requests_status": {
          "name": "IDX_device_auth_requests_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_device_auth_requests_expires_at": {
          "name": "IDX_device_auth_requests_expires_at",
          "columns": [
            {
              "expression": "expires_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_device_auth_requests_kilo_user_id": {
          "name": "IDX_device_auth_requests_kilo_user_id",
          "columns": [
            {
              "expression": "kilo_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "device_auth_requests_kilo_user_id_kilocode_users_id_fk": {
          "name": "device_auth_requests_kilo_user_id_kilocode_users_id_fk",
          "tableFrom": "device_auth_requests",
          "tableTo": "kilocode_users",
          "columnsFrom": [
            "kilo_user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.editor_name": {
      "name": "editor_name",
      "schema": "",
      "columns": {
        "editor_name_id": {
          "name": "editor_name_id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "editor_name": {
          "name": "editor_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "UQ_editor_name": {
          "name": "UQ_editor_name",
          "columns": [
            {
              "expression": "editor_name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.enrichment_data": {
      "name": "enrichment_data",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "github_enrichment_data": {
          "name": "github_enrichment_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "linkedin_enrichment_data": {
          "name": "linkedin_enrichment_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "clay_enrichment_data": {
          "name": "clay_enrichment_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "IDX_enrichment_data_user_id": {
          "name": "IDX_enrichment_data_user_id",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "enrichment_data_user_id_kilocode_users_id_fk": {
          "name": "enrichment_data_user_id_kilocode_users_id_fk",
          "tableFrom": "enrichment_data",
          "tableTo": "kilocode_users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "UQ_enrichment_data_user_id": {
          "name": "UQ_enrichment_data_user_id",
          "nullsNotDistinct": false,
          "columns": [
            "user_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.finish_reason": {
      "name": "finish_reason",
      "schema": "",
      "columns": {
        "finish_reason_id": {
          "name": "finish_reason_id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "finish_reason": {
          "name": "finish_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "UQ_finish_reason": {
          "name": "UQ_finish_reason",
          "columns": [
            {
              "expression": "finish_reason",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.free_model_usage": {
      "name": "free_model_usage",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "ip_address": {
          "name": "ip_address",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "model": {
          "name": "model",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "kilo_user_id": {
          "name": "kilo_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_free_model_usage_ip_created_at": {
          "name": "idx_free_model_usage_ip_created_at",
          "columns": [
            {
              "expression": "ip_address",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_free_model_usage_created_at": {
          "name": "idx_free_model_usage_created_at",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.http_ip": {
      "name": "http_ip",
      "schema": "",
      "columns": {
        "http_ip_id": {
          "name": "http_ip_id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "http_ip": {
          "name": "http_ip",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "UQ_http_ip": {
          "name": "UQ_http_ip",
          "columns": [
            {
              "expression": "http_ip",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.http_user_agent": {
      "name": "http_user_agent",
      "schema": "",
      "columns": {
        "http_user_agent_id": {
          "name": "http_user_agent_id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "http_user_agent": {
          "name": "http_user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "UQ_http_user_agent": {
          "name": "UQ_http_user_agent",
          "columns": [
            {
              "expression": "http_user_agent",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.ja4_digest": {
      "name": "ja4_digest",
      "schema": "",
      "columns": {
        "ja4_digest_id": {
          "name": "ja4_digest_id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "ja4_digest": {
          "name": "ja4_digest",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "UQ_ja4_digest": {
          "name": "UQ_ja4_digest",
          "columns": [
            {
              "expression": "ja4_digest",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.kilo_pass_audit_log": {
      "name": "kilo_pass_audit_log",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "kilo_user_id": {
          "name": "kilo_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "kilo_pass_subscription_id": {
          "name": "kilo_pass_subscription_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "action": {
          "name": "action",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "result": {
          "name": "result",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "idempotency_key": {
          "name": "idempotency_key",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "stripe_event_id": {
          "name": "stripe_event_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "stripe_invoice_id": {
          "name": "stripe_invoice_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "stripe_subscription_id": {
          "name": "stripe_subscription_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "related_credit_transaction_id": {
          "name": "related_credit_transaction_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "related_monthly_issuance_id": {
          "name": "related_monthly_issuance_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "payload_json": {
          "name": "payload_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        }
      },
      "indexes": {
        "IDX_kilo_pass_audit_log_created_at": {
          "name": "IDX_kilo_pass_audit_log_created_at",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_kilo_pass_audit_log_kilo_user_id": {
          "name": "IDX_kilo_pass_audit_log_kilo_user_id",
          "columns": [
            {
              "expression": "kilo_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_kilo_pass_audit_log_kilo_pass_subscription_id": {
          "name": "IDX_kilo_pass_audit_log_kilo_pass_subscription_id",
          "columns": [
            {
              "expression": "kilo_pass_subscription_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_kilo_pass_audit_log_action": {
          "name": "IDX_kilo_pass_audit_log_action",
          "columns": [
            {
              "expression": "action",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_kilo_pass_audit_log_result": {
          "name": "IDX_kilo_pass_audit_log_result",
          "columns": [
            {
              "expression": "result",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_kilo_pass_audit_log_idempotency_key": {
          "name": "IDX_kilo_pass_audit_log_idempotency_key",
          "columns": [
            {
              "expression": "idempotency_key",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_kilo_pass_audit_log_stripe_event_id": {
          "name": "IDX_kilo_pass_audit_log_stripe_event_id",
          "columns": [
            {
              "expression": "stripe_event_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_kilo_pass_audit_log_stripe_invoice_id": {
          "name": "IDX_kilo_pass_audit_log_stripe_invoice_id",
          "columns": [
            {
              "expression": "stripe_invoice_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_kilo_pass_audit_log_stripe_subscription_id": {
          "name": "IDX_kilo_pass_audit_log_stripe_subscription_id",
          "columns": [
            {
              "expression": "stripe_subscription_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_kilo_pass_audit_log_related_credit_transaction_id": {
          "name": "IDX_kilo_pass_audit_log_related_credit_transaction_id",
          "columns": [
            {
              "expression": "related_credit_transaction_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_kilo_pass_audit_log_related_monthly_issuance_id": {
          "name": "IDX_kilo_pass_audit_log_related_monthly_issuance_id",
          "columns": [
            {
              "expression": "related_monthly_issuance_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "kilo_pass_audit_log_kilo_user_id_kilocode_users_id_fk": {
          "name": "kilo_pass_audit_log_kilo_user_id_kilocode_users_id_fk",
          "tableFrom": "kilo_pass_audit_log",
          "tableTo": "kilocode_users",
          "columnsFrom": [
            "kilo_user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "cascade"
        },
        "kilo_pass_audit_log_kilo_pass_subscription_id_kilo_pass_subscriptions_id_fk": {
          "name": "kilo_pass_audit_log_kilo_pass_subscription_id_kilo_pass_subscriptions_id_fk",
          "tableFrom": "kilo_pass_audit_log",
          "tableTo": "kilo_pass_subscriptions",
          "columnsFrom": [
            "kilo_pass_subscription_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "cascade"
        },
        "kilo_pass_audit_log_related_credit_transaction_id_credit_transactions_id_fk": {
          "name": "kilo_pass_audit_log_related_credit_transaction_id_credit_transactions_id_fk",
          "tableFrom": "kilo_pass_audit_log",
          "tableTo": "credit_transactions",
          "columnsFrom": [
            "related_credit_transaction_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "cascade"
        },
        "kilo_pass_audit_log_related_monthly_issuance_id_kilo_pass_issuances_id_fk": {
          "name": "kilo_pass_audit_log_related_monthly_issuance_id_kilo_pass_issuances_id_fk",
          "tableFrom": "kilo_pass_audit_log",
          "tableTo": "kilo_pass_issuances",
          "columnsFrom": [
            "related_monthly_issuance_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "kilo_pass_audit_log_action_check": {
          "name": "kilo_pass_audit_log_action_check",
          "value": "\"kilo_pass_audit_log\".\"action\" IN ('stripe_webhook_received', 'kilo_pass_invoice_paid_handled', 'base_credits_issued', 'bonus_credits_issued', 'bonus_credits_skipped_idempotent', 'first_month_50pct_promo_issued', 'yearly_monthly_base_cron_started', 'yearly_monthly_base_cron_completed', 'issue_yearly_remaining_credits', 'yearly_monthly_bonus_cron_started', 'yearly_monthly_bonus_cron_completed')"
        },
        "kilo_pass_audit_log_result_check": {
          "name": "kilo_pass_audit_log_result_check",
          "value": "\"kilo_pass_audit_log\".\"result\" IN ('success', 'skipped_idempotent', 'failed')"
        }
      },
      "isRLSEnabled": false
    },
    "public.kilo_pass_issuance_items": {
      "name": "kilo_pass_issuance_items",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "kilo_pass_issuance_id": {
          "name": "kilo_pass_issuance_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "kind": {
          "name": "kind",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "credit_transaction_id": {
          "name": "credit_transaction_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "amount_usd": {
          "name": "amount_usd",
          "type": "numeric(12, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "bonus_percent_applied": {
          "name": "bonus_percent_applied",
          "type": "numeric(6, 4)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "IDX_kilo_pass_issuance_items_issuance_id": {
          "name": "IDX_kilo_pass_issuance_items_issuance_id",
          "columns": [
            {
              "expression": "kilo_pass_issuance_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_kilo_pass_issuance_items_credit_transaction_id": {
          "name": "IDX_kilo_pass_issuance_items_credit_transaction_id",
          "columns": [
            {
              "expression": "credit_transaction_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "kilo_pass_issuance_items_kilo_pass_issuance_id_kilo_pass_issuances_id_fk": {
          "name": "kilo_pass_issuance_items_kilo_pass_issuance_id_kilo_pass_issuances_id_fk",
          "tableFrom": "kilo_pass_issuance_items",
          "tableTo": "kilo_pass_issuances",
          "columnsFrom": [
            "kilo_pass_issuance_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "kilo_pass_issuance_items_credit_transaction_id_credit_transactions_id_fk": {
          "name": "kilo_pass_issuance_items_credit_transaction_id_credit_transactions_id_fk",
          "tableFrom": "kilo_pass_issuance_items",
          "tableTo": "credit_transactions",
          "columnsFrom": [
            "credit_transaction_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "kilo_pass_issuance_items_credit_transaction_id_unique": {
          "name": "kilo_pass_issuance_items_credit_transaction_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "credit_transaction_id"
          ]
        },
        "UQ_kilo_pass_issuance_items_issuance_kind": {
          "name": "UQ_kilo_pass_issuance_items_issuance_kind",
          "nullsNotDistinct": false,
          "columns": [
            "kilo_pass_issuance_id",
            "kind"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "kilo_pass_issuance_items_bonus_percent_applied_range_check": {
          "name": "kilo_pass_issuance_items_bonus_percent_applied_range_check",
          "value": "\"kilo_pass_issuance_items\".\"bonus_percent_applied\" IS NULL OR (\"kilo_pass_issuance_items\".\"bonus_percent_applied\" >= 0 AND \"kilo_pass_issuance_items\".\"bonus_percent_applied\" <= 1)"
        },
        "kilo_pass_issuance_items_amount_usd_non_negative_check": {
          "name": "kilo_pass_issuance_items_amount_usd_non_negative_check",
          "value": "\"kilo_pass_issuance_items\".\"amount_usd\" >= 0"
        },
        "kilo_pass_issuance_items_kind_check": {
          "name": "kilo_pass_issuance_items_kind_check",
          "value": "\"kilo_pass_issuance_items\".\"kind\" IN ('base', 'bonus', 'promo_first_month_50pct')"
        }
      },
      "isRLSEnabled": false
    },
    "public.kilo_pass_issuances": {
      "name": "kilo_pass_issuances",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "kilo_pass_subscription_id": {
          "name": "kilo_pass_subscription_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "issue_month": {
          "name": "issue_month",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "source": {
          "name": "source",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "stripe_invoice_id": {
          "name": "stripe_invoice_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "UQ_kilo_pass_issuances_stripe_invoice_id": {
          "name": "UQ_kilo_pass_issuances_stripe_invoice_id",
          "columns": [
            {
              "expression": "stripe_invoice_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"kilo_pass_issuances\".\"stripe_invoice_id\" IS NOT NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_kilo_pass_issuances_subscription_id": {
          "name": "IDX_kilo_pass_issuances_subscription_id",
          "columns": [
            {
              "expression": "kilo_pass_subscription_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_kilo_pass_issuances_issue_month": {
          "name": "IDX_kilo_pass_issuances_issue_month",
          "columns": [
            {
              "expression": "issue_month",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "kilo_pass_issuances_kilo_pass_subscription_id_kilo_pass_subscriptions_id_fk": {
          "name": "kilo_pass_issuances_kilo_pass_subscription_id_kilo_pass_subscriptions_id_fk",
          "tableFrom": "kilo_pass_issuances",
          "tableTo": "kilo_pass_subscriptions",
          "columnsFrom": [
            "kilo_pass_subscription_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "UQ_kilo_pass_issuances_subscription_issue_month": {
          "name": "UQ_kilo_pass_issuances_subscription_issue_month",
          "nullsNotDistinct": false,
          "columns": [
            "kilo_pass_subscription_id",
            "issue_month"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "kilo_pass_issuances_issue_month_day_one_check": {
          "name": "kilo_pass_issuances_issue_month_day_one_check",
          "value": "EXTRACT(DAY FROM \"kilo_pass_issuances\".\"issue_month\") = 1"
        },
        "kilo_pass_issuances_source_check": {
          "name": "kilo_pass_issuances_source_check",
          "value": "\"kilo_pass_issuances\".\"source\" IN ('stripe_invoice', 'cron')"
        }
      },
      "isRLSEnabled": false
    },
    "public.kilo_pass_scheduled_changes": {
      "name": "kilo_pass_scheduled_changes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "kilo_user_id": {
          "name": "kilo_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "stripe_subscription_id": {
          "name": "stripe_subscription_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "from_tier": {
          "name": "from_tier",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "from_cadence": {
          "name": "from_cadence",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "to_tier": {
          "name": "to_tier",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "to_cadence": {
          "name": "to_cadence",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "stripe_schedule_id": {
          "name": "stripe_schedule_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "effective_at": {
          "name": "effective_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "IDX_kilo_pass_scheduled_changes_kilo_user_id": {
          "name": "IDX_kilo_pass_scheduled_changes_kilo_user_id",
          "columns": [
            {
              "expression": "kilo_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_kilo_pass_scheduled_changes_status": {
          "name": "IDX_kilo_pass_scheduled_changes_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_kilo_pass_scheduled_changes_stripe_subscription_id": {
          "name": "IDX_kilo_pass_scheduled_changes_stripe_subscription_id",
          "columns": [
            {
              "expression": "stripe_subscription_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "UQ_kilo_pass_scheduled_changes_active_stripe_subscription_id": {
          "name": "UQ_kilo_pass_scheduled_changes_active_stripe_subscription_id",
          "columns": [
            {
              "expression": "stripe_subscription_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"kilo_pass_scheduled_changes\".\"deleted_at\" is null",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_kilo_pass_scheduled_changes_effective_at": {
          "name": "IDX_kilo_pass_scheduled_changes_effective_at",
          "columns": [
            {
              "expression": "effective_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_kilo_pass_scheduled_changes_deleted_at": {
          "name": "IDX_kilo_pass_scheduled_changes_deleted_at",
          "columns": [
            {
              "expression": "deleted_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "kilo_pass_scheduled_changes_kilo_user_id_kilocode_users_id_fk": {
          "name": "kilo_pass_scheduled_changes_kilo_user_id_kilocode_users_id_fk",
          "tableFrom": "kilo_pass_scheduled_changes",
          "tableTo": "kilocode_users",
          "columnsFrom": [
            "kilo_user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        },
        "kilo_pass_scheduled_changes_stripe_subscription_id_kilo_pass_subscriptions_stripe_subscription_id_fk": {
          "name": "kilo_pass_scheduled_changes_stripe_subscription_id_kilo_pass_subscriptions_stripe_subscription_id_fk",
          "tableFrom": "kilo_pass_scheduled_changes",
          "tableTo": "kilo_pass_subscriptions",
          "columnsFrom": [
            "stripe_subscription_id"
          ],
          "columnsTo": [
            "stripe_subscription_id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "kilo_pass_scheduled_changes_from_tier_check": {
          "name": "kilo_pass_scheduled_changes_from_tier_check",
          "value": "\"kilo_pass_scheduled_changes\".\"from_tier\" IN ('tier_19', 'tier_49', 'tier_199')"
        },
        "kilo_pass_scheduled_changes_from_cadence_check": {
          "name": "kilo_pass_scheduled_changes_from_cadence_check",
          "value": "\"kilo_pass_scheduled_changes\".\"from_cadence\" IN ('monthly', 'yearly')"
        },
        "kilo_pass_scheduled_changes_to_tier_check": {
          "name": "kilo_pass_scheduled_changes_to_tier_check",
          "value": "\"kilo_pass_scheduled_changes\".\"to_tier\" IN ('tier_19', 'tier_49', 'tier_199')"
        },
        "kilo_pass_scheduled_changes_to_cadence_check": {
          "name": "kilo_pass_scheduled_changes_to_cadence_check",
          "value": "\"kilo_pass_scheduled_changes\".\"to_cadence\" IN ('monthly', 'yearly')"
        },
        "kilo_pass_scheduled_changes_status_check": {
          "name": "kilo_pass_scheduled_changes_status_check",
          "value": "\"kilo_pass_scheduled_changes\".\"status\" IN ('not_started', 'active', 'completed', 'released', 'canceled')"
        }
      },
      "isRLSEnabled": false
    },
    "public.kilo_pass_subscriptions": {
      "name": "kilo_pass_subscriptions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "kilo_user_id": {
          "name": "kilo_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "stripe_subscription_id": {
          "name": "stripe_subscription_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "tier": {
          "name": "tier",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "cadence": {
          "name": "cadence",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "cancel_at_period_end": {
          "name": "cancel_at_period_end",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "started_at": {
          "name": "started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "ended_at": {
          "name": "ended_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "current_streak_months": {
          "name": "current_streak_months",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "next_yearly_issue_at": {
          "name": "next_yearly_issue_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "IDX_kilo_pass_subscriptions_kilo_user_id": {
          "name": "IDX_kilo_pass_subscriptions_kilo_user_id",
          "columns": [
            {
              "expression": "kilo_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_kilo_pass_subscriptions_status": {
          "name": "IDX_kilo_pass_subscriptions_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_kilo_pass_subscriptions_cadence": {
          "name": "IDX_kilo_pass_subscriptions_cadence",
          "columns": [
            {
              "expression": "cadence",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "kilo_pass_subscriptions_kilo_user_id_kilocode_users_id_fk": {
          "name": "kilo_pass_subscriptions_kilo_user_id_kilocode_users_id_fk",
          "tableFrom": "kilo_pass_subscriptions",
          "tableTo": "kilocode_users",
          "columnsFrom": [
            "kilo_user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "kilo_pass_subscriptions_stripe_subscription_id_unique": {
          "name": "kilo_pass_subscriptions_stripe_subscription_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "stripe_subscription_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "kilo_pass_subscriptions_current_streak_months_non_negative_check": {
          "name": "kilo_pass_subscriptions_current_streak_months_non_negative_check",
          "value": "\"kilo_pass_subscriptions\".\"current_streak_months\" >= 0"
        },
        "kilo_pass_subscriptions_tier_check": {
          "name": "kilo_pass_subscriptions_tier_check",
          "value": "\"kilo_pass_subscriptions\".\"tier\" IN ('tier_19', 'tier_49', 'tier_199')"
        },
        "kilo_pass_subscriptions_cadence_check": {
          "name": "kilo_pass_subscriptions_cadence_check",
          "value": "\"kilo_pass_subscriptions\".\"cadence\" IN ('monthly', 'yearly')"
        }
      },
      "isRLSEnabled": false
    },
    "public.kilocode_users": {
      "name": "kilocode_users",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "google_user_email": {
          "name": "google_user_email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "google_user_name": {
          "name": "google_user_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "google_user_image_url": {
          "name": "google_user_image_url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "hosted_domain": {
          "name": "hosted_domain",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "microdollars_used": {
          "name": "microdollars_used",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "kilo_pass_threshold": {
          "name": "kilo_pass_threshold",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "stripe_customer_id": {
          "name": "stripe_customer_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "is_admin": {
          "name": "is_admin",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "total_microdollars_acquired": {
          "name": "total_microdollars_acquired",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "next_credit_expiration_at": {
          "name": "next_credit_expiration_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "has_validation_stytch": {
          "name": "has_validation_stytch",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "has_validation_novel_card_with_hold": {
          "name": "has_validation_novel_card_with_hold",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "blocked_reason": {
          "name": "blocked_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "api_token_pepper": {
          "name": "api_token_pepper",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "auto_top_up_enabled": {
          "name": "auto_top_up_enabled",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "is_bot": {
          "name": "is_bot",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "default_model": {
          "name": "default_model",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "cohorts": {
          "name": "cohorts",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "UQ_b1afacbcf43f2c7c4cb9f7e7faa": {
          "name": "UQ_b1afacbcf43f2c7c4cb9f7e7faa",
          "nullsNotDistinct": false,
          "columns": [
            "google_user_email"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "blocked_reason_not_empty": {
          "name": "blocked_reason_not_empty",
          "value": "length(blocked_reason) > 0"
        }
      },
      "isRLSEnabled": false
    },
    "public.magic_link_tokens": {
      "name": "magic_link_tokens",
      "schema": "",
      "columns": {
        "token_hash": {
          "name": "token_hash",
          "type": "text",
          "primaryKey": true,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "consumed_at": {
          "name": "consumed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_magic_link_tokens_email": {
          "name": "idx_magic_link_tokens_email",
          "columns": [
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_magic_link_tokens_expires_at": {
          "name": "idx_magic_link_tokens_expires_at",
          "columns": [
            {
              "expression": "expires_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "check_expires_at_future": {
          "name": "check_expires_at_future",
          "value": "\"magic_link_tokens\".\"expires_at\" > \"magic_link_tokens\".\"created_at\""
        }
      },
      "isRLSEnabled": false
    },
    "public.microdollar_usage": {
      "name": "microdollar_usage",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "kilo_user_id": {
          "name": "kilo_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "cost": {
          "name": "cost",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "input_tokens": {
          "name": "input_tokens",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "output_tokens": {
          "name": "output_tokens",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "cache_write_tokens": {
          "name": "cache_write_tokens",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "cache_hit_tokens": {
          "name": "cache_hit_tokens",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "provider": {
          "name": "provider",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "model": {
          "name": "model",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "requested_model": {
          "name": "requested_model",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "cache_discount": {
          "name": "cache_discount",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "has_error": {
          "name": "has_error",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "abuse_classification": {
          "name": "abuse_classification",
          "type": "smallint",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "inference_provider": {
          "name": "inference_provider",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "project_id": {
          "name": "project_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_created_at": {
          "name": "idx_created_at",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_abuse_classification": {
          "name": "idx_abuse_classification",
          "columns": [
            {
              "expression": "abuse_classification",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_kilo_user_id_created_at2": {
          "name": "idx_kilo_user_id_created_at2",
          "columns": [
            {
              "expression": "kilo_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_microdollar_usage_organization_id": {
          "name": "idx_microdollar_usage_organization_id",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "where": "\"microdollar_usage\".\"organization_id\" is not null",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.microdollar_usage_metadata": {
      "name": "microdollar_usage_metadata",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "message_id": {
          "name": "message_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "http_user_agent_id": {
          "name": "http_user_agent_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "http_ip_id": {
          "name": "http_ip_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "vercel_ip_city_id": {
          "name": "vercel_ip_city_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "vercel_ip_country_id": {
          "name": "vercel_ip_country_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "vercel_ip_latitude": {
          "name": "vercel_ip_latitude",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "vercel_ip_longitude": {
          "name": "vercel_ip_longitude",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "ja4_digest_id": {
          "name": "ja4_digest_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "user_prompt_prefix": {
          "name": "user_prompt_prefix",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "system_prompt_prefix_id": {
          "name": "system_prompt_prefix_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "system_prompt_length": {
          "name": "system_prompt_length",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "max_tokens": {
          "name": "max_tokens",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "has_middle_out_transform": {
          "name": "has_middle_out_transform",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "status_code": {
          "name": "status_code",
          "type": "smallint",
          "primaryKey": false,
          "notNull": false
        },
        "upstream_id": {
          "name": "upstream_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "finish_reason_id": {
          "name": "finish_reason_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "latency": {
          "name": "latency",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "moderation_latency": {
          "name": "moderation_latency",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "generation_time": {
          "name": "generation_time",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "is_byok": {
          "name": "is_byok",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "is_user_byok": {
          "name": "is_user_byok",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "streamed": {
          "name": "streamed",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "cancelled": {
          "name": "cancelled",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "editor_name_id": {
          "name": "editor_name_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "has_tools": {
          "name": "has_tools",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_microdollar_usage_metadata_created_at": {
          "name": "idx_microdollar_usage_metadata_created_at",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "microdollar_usage_metadata_http_user_agent_id_http_user_agent_http_user_agent_id_fk": {
          "name": "microdollar_usage_metadata_http_user_agent_id_http_user_agent_http_user_agent_id_fk",
          "tableFrom": "microdollar_usage_metadata",
          "tableTo": "http_user_agent",
          "columnsFrom": [
            "http_user_agent_id"
          ],
          "columnsTo": [
            "http_user_agent_id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "microdollar_usage_metadata_http_ip_id_http_ip_http_ip_id_fk": {
          "name": "microdollar_usage_metadata_http_ip_id_http_ip_http_ip_id_fk",
          "tableFrom": "microdollar_usage_metadata",
          "tableTo": "http_ip",
          "columnsFrom": [
            "http_ip_id"
          ],
          "columnsTo": [
            "http_ip_id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "microdollar_usage_metadata_vercel_ip_city_id_vercel_ip_city_vercel_ip_city_id_fk": {
          "name": "microdollar_usage_metadata_vercel_ip_city_id_vercel_ip_city_vercel_ip_city_id_fk",
          "tableFrom": "microdollar_usage_metadata",
          "tableTo": "vercel_ip_city",
          "columnsFrom": [
            "vercel_ip_city_id"
          ],
          "columnsTo": [
            "vercel_ip_city_id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "microdollar_usage_metadata_vercel_ip_country_id_vercel_ip_country_vercel_ip_country_id_fk": {
          "name": "microdollar_usage_metadata_vercel_ip_country_id_vercel_ip_country_vercel_ip_country_id_fk",
          "tableFrom": "microdollar_usage_metadata",
          "tableTo": "vercel_ip_country",
          "columnsFrom": [
            "vercel_ip_country_id"
          ],
          "columnsTo": [
            "vercel_ip_country_id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "microdollar_usage_metadata_ja4_digest_id_ja4_digest_ja4_digest_id_fk": {
          "name": "microdollar_usage_metadata_ja4_digest_id_ja4_digest_ja4_digest_id_fk",
          "tableFrom": "microdollar_usage_metadata",
          "tableTo": "ja4_digest",
          "columnsFrom": [
            "ja4_digest_id"
          ],
          "columnsTo": [
            "ja4_digest_id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "microdollar_usage_metadata_system_prompt_prefix_id_system_prompt_prefix_system_prompt_prefix_id_fk": {
          "name": "microdollar_usage_metadata_system_prompt_prefix_id_system_prompt_prefix_system_prompt_prefix_id_fk",
          "tableFrom": "microdollar_usage_metadata",
          "tableTo": "system_prompt_prefix",
          "columnsFrom": [
            "system_prompt_prefix_id"
          ],
          "columnsTo": [
            "system_prompt_prefix_id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.model_stats": {
      "name": "model_stats",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false,
          "default": true
        },
        "is_featured": {
          "name": "is_featured",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "is_stealth": {
          "name": "is_stealth",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "is_recommended": {
          "name": "is_recommended",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "openrouter_id": {
          "name": "openrouter_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "slug": {
          "name": "slug",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "aa_slug": {
          "name": "aa_slug",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "model_creator": {
          "name": "model_creator",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "creator_slug": {
          "name": "creator_slug",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "release_date": {
          "name": "release_date",
          "type": "date",
          "primaryKey": false,
          "notNull": false
        },
        "price_input": {
          "name": "price_input",
          "type": "numeric(10, 6)",
          "primaryKey": false,
          "notNull": false
        },
        "price_output": {
          "name": "price_output",
          "type": "numeric(10, 6)",
          "primaryKey": false,
          "notNull": false
        },
        "coding_index": {
          "name": "coding_index",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "speed_tokens_per_sec": {
          "name": "speed_tokens_per_sec",
          "type": "numeric(8, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "context_length": {
          "name": "context_length",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "max_output_tokens": {
          "name": "max_output_tokens",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "input_modalities": {
          "name": "input_modalities",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "openrouter_data": {
          "name": "openrouter_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "benchmarks": {
          "name": "benchmarks",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "chart_data": {
          "name": "chart_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "IDX_model_stats_openrouter_id": {
          "name": "IDX_model_stats_openrouter_id",
          "columns": [
            {
              "expression": "openrouter_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_model_stats_slug": {
          "name": "IDX_model_stats_slug",
          "columns": [
            {
              "expression": "slug",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_model_stats_is_active": {
          "name": "IDX_model_stats_is_active",
          "columns": [
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_model_stats_creator_slug": {
          "name": "IDX_model_stats_creator_slug",
          "columns": [
            {
              "expression": "creator_slug",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_model_stats_price_input": {
          "name": "IDX_model_stats_price_input",
          "columns": [
            {
              "expression": "price_input",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_model_stats_coding_index": {
          "name": "IDX_model_stats_coding_index",
          "columns": [
            {
              "expression": "coding_index",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_model_stats_context_length": {
          "name": "IDX_model_stats_context_length",
          "columns": [
            {
              "expression": "context_length",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "model_stats_openrouter_id_unique": {
          "name": "model_stats_openrouter_id_unique",
          "nullsNotDistinct": false,
          "columns": [
            "openrouter_id"
          ]
        },
        "model_stats_slug_unique": {
          "name": "model_stats_slug_unique",
          "nullsNotDistinct": false,
          "columns": [
            "slug"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.models_by_provider": {
      "name": "models_by_provider",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "data": {
          "name": "data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {},
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.organization_audit_logs": {
      "name": "organization_audit_logs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "action": {
          "name": "action",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "actor_id": {
          "name": "actor_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "actor_email": {
          "name": "actor_email",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "actor_name": {
          "name": "actor_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "message": {
          "name": "message",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "IDX_organization_audit_logs_organization_id": {
          "name": "IDX_organization_audit_logs_organization_id",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_organization_audit_logs_action": {
          "name": "IDX_organization_audit_logs_action",
          "columns": [
            {
              "expression": "action",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_organization_audit_logs_actor_id": {
          "name": "IDX_organization_audit_logs_actor_id",
          "columns": [
            {
              "expression": "actor_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_organization_audit_logs_created_at": {
          "name": "IDX_organization_audit_logs_created_at",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.organization_invitations": {
      "name": "organization_invitations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "invited_by": {
          "name": "invited_by",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "token": {
          "name": "token",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "accepted_at": {
          "name": "accepted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "UQ_organization_invitations_token": {
          "name": "UQ_organization_invitations_token",
          "columns": [
            {
              "expression": "token",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_organization_invitations_org_id": {
          "name": "IDX_organization_invitations_org_id",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_organization_invitations_email": {
          "name": "IDX_organization_invitations_email",
          "columns": [
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_organization_invitations_expires_at": {
          "name": "IDX_organization_invitations_expires_at",
          "columns": [
            {
              "expression": "expires_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.organization_memberships": {
      "name": "organization_memberships",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "kilo_user_id": {
          "name": "kilo_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "role": {
          "name": "role",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "joined_at": {
          "name": "joined_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "invited_by": {
          "name": "invited_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "IDX_organization_memberships_org_id": {
          "name": "IDX_organization_memberships_org_id",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_organization_memberships_user_id": {
          "name": "IDX_organization_memberships_user_id",
          "columns": [
            {
              "expression": "kilo_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "UQ_organization_memberships_org_user": {
          "name": "UQ_organization_memberships_org_user",
          "nullsNotDistinct": false,
          "columns": [
            "organization_id",
            "kilo_user_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.organization_seats_purchases": {
      "name": "organization_seats_purchases",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "subscription_stripe_id": {
          "name": "subscription_stripe_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "seat_count": {
          "name": "seat_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "amount_usd": {
          "name": "amount_usd",
          "type": "numeric",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "subscription_status": {
          "name": "subscription_status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'active'"
        },
        "idempotency_key": {
          "name": "idempotency_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "starts_at": {
          "name": "starts_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "billing_cycle": {
          "name": "billing_cycle",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'monthly'"
        }
      },
      "indexes": {
        "IDX_organization_seats_org_id": {
          "name": "IDX_organization_seats_org_id",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_organization_seats_expires_at": {
          "name": "IDX_organization_seats_expires_at",
          "columns": [
            {
              "expression": "expires_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_organization_seats_created_at": {
          "name": "IDX_organization_seats_created_at",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_organization_seats_updated_at": {
          "name": "IDX_organization_seats_updated_at",
          "columns": [
            {
              "expression": "updated_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_organization_seats_starts_at": {
          "name": "IDX_organization_seats_starts_at",
          "columns": [
            {
              "expression": "starts_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "UQ_organization_seats_idempotency_key": {
          "name": "UQ_organization_seats_idempotency_key",
          "nullsNotDistinct": false,
          "columns": [
            "idempotency_key"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.organization_user_limits": {
      "name": "organization_user_limits",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "kilo_user_id": {
          "name": "kilo_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "limit_type": {
          "name": "limit_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "microdollar_limit": {
          "name": "microdollar_limit",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "IDX_organization_user_limits_org_id": {
          "name": "IDX_organization_user_limits_org_id",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_organization_user_limits_user_id": {
          "name": "IDX_organization_user_limits_user_id",
          "columns": [
            {
              "expression": "kilo_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "UQ_organization_user_limits_org_user": {
          "name": "UQ_organization_user_limits_org_user",
          "nullsNotDistinct": false,
          "columns": [
            "organization_id",
            "kilo_user_id",
            "limit_type"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.organization_user_usage": {
      "name": "organization_user_usage",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "kilo_user_id": {
          "name": "kilo_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "usage_date": {
          "name": "usage_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "limit_type": {
          "name": "limit_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "microdollar_usage": {
          "name": "microdollar_usage",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "IDX_organization_user_daily_usage_org_id": {
          "name": "IDX_organization_user_daily_usage_org_id",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_organization_user_daily_usage_user_id": {
          "name": "IDX_organization_user_daily_usage_user_id",
          "columns": [
            {
              "expression": "kilo_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "UQ_organization_user_daily_usage_org_user_date": {
          "name": "UQ_organization_user_daily_usage_org_user_date",
          "nullsNotDistinct": false,
          "columns": [
            "organization_id",
            "kilo_user_id",
            "limit_type",
            "usage_date"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.organizations": {
      "name": "organizations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "microdollars_balance": {
          "name": "microdollars_balance",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "microdollars_used": {
          "name": "microdollars_used",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "stripe_customer_id": {
          "name": "stripe_customer_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "auto_top_up_enabled": {
          "name": "auto_top_up_enabled",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "settings": {
          "name": "settings",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        },
        "seat_count": {
          "name": "seat_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "require_seats": {
          "name": "require_seats",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "created_by_kilo_user_id": {
          "name": "created_by_kilo_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "sso_domain": {
          "name": "sso_domain",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "plan": {
          "name": "plan",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'teams'"
        },
        "free_trial_end_at": {
          "name": "free_trial_end_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "IDX_organizations_sso_domain": {
          "name": "IDX_organizations_sso_domain",
          "columns": [
            {
              "expression": "sso_domain",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "organizations_name_not_empty_check": {
          "name": "organizations_name_not_empty_check",
          "value": "length(trim(\"organizations\".\"name\")) > 0"
        }
      },
      "isRLSEnabled": false
    },
    "public.organization_modes": {
      "name": "organization_modes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "slug": {
          "name": "slug",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_by": {
          "name": "created_by",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "config": {
          "name": "config",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        }
      },
      "indexes": {
        "IDX_organization_modes_organization_id": {
          "name": "IDX_organization_modes_organization_id",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "UQ_organization_modes_org_id_slug": {
          "name": "UQ_organization_modes_org_id_slug",
          "nullsNotDistinct": false,
          "columns": [
            "organization_id",
            "slug"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.payment_methods": {
      "name": "payment_methods",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "stripe_fingerprint": {
          "name": "stripe_fingerprint",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "user_id": {
          "name": "user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "stripe_id": {
          "name": "stripe_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "last4": {
          "name": "last4",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "brand": {
          "name": "brand",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "address_line1": {
          "name": "address_line1",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "address_line2": {
          "name": "address_line2",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "address_city": {
          "name": "address_city",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "address_state": {
          "name": "address_state",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "address_zip": {
          "name": "address_zip",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "address_country": {
          "name": "address_country",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "name": {
          "name": "name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "three_d_secure_supported": {
          "name": "three_d_secure_supported",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "funding": {
          "name": "funding",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "regulated_status": {
          "name": "regulated_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "address_line1_check_status": {
          "name": "address_line1_check_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "postal_code_check_status": {
          "name": "postal_code_check_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "http_x_forwarded_for": {
          "name": "http_x_forwarded_for",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "http_x_vercel_ip_city": {
          "name": "http_x_vercel_ip_city",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "http_x_vercel_ip_country": {
          "name": "http_x_vercel_ip_country",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "http_x_vercel_ip_latitude": {
          "name": "http_x_vercel_ip_latitude",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "http_x_vercel_ip_longitude": {
          "name": "http_x_vercel_ip_longitude",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "http_x_vercel_ja4_digest": {
          "name": "http_x_vercel_ja4_digest",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "eligible_for_free_credits": {
          "name": "eligible_for_free_credits",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "deleted_at": {
          "name": "deleted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "stripe_data": {
          "name": "stripe_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "type": {
          "name": "type",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "IDX_d7d7fb15569674aaadcfbc0428": {
          "name": "IDX_d7d7fb15569674aaadcfbc0428",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_e1feb919d0ab8a36381d5d5138": {
          "name": "IDX_e1feb919d0ab8a36381d5d5138",
          "columns": [
            {
              "expression": "stripe_fingerprint",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_payment_methods_organization_id": {
          "name": "IDX_payment_methods_organization_id",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "UQ_29df1b0403df5792c96bbbfdbe6": {
          "name": "UQ_29df1b0403df5792c96bbbfdbe6",
          "nullsNotDistinct": false,
          "columns": [
            "user_id",
            "stripe_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.platform_integrations": {
      "name": "platform_integrations",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "owned_by_organization_id": {
          "name": "owned_by_organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "owned_by_user_id": {
          "name": "owned_by_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_by_user_id": {
          "name": "created_by_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "platform": {
          "name": "platform",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "integration_type": {
          "name": "integration_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "platform_installation_id": {
          "name": "platform_installation_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "platform_account_id": {
          "name": "platform_account_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "platform_account_login": {
          "name": "platform_account_login",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "permissions": {
          "name": "permissions",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "scopes": {
          "name": "scopes",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "repository_access": {
          "name": "repository_access",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "repositories": {
          "name": "repositories",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "repositories_synced_at": {
          "name": "repositories_synced_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "metadata": {
          "name": "metadata",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "kilo_requester_user_id": {
          "name": "kilo_requester_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "platform_requester_account_id": {
          "name": "platform_requester_account_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "integration_status": {
          "name": "integration_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "suspended_at": {
          "name": "suspended_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "suspended_by": {
          "name": "suspended_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "github_app_type": {
          "name": "github_app_type",
          "type": "text",
          "primaryKey": false,
          "notNull": false,
          "default": "'standard'"
        },
        "installed_at": {
          "name": "installed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "UQ_platform_integrations_owned_by_org_platform_inst": {
          "name": "UQ_platform_integrations_owned_by_org_platform_inst",
          "columns": [
            {
              "expression": "owned_by_organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "platform",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "platform_installation_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"platform_integrations\".\"owned_by_organization_id\" is not null",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "UQ_platform_integrations_owned_by_user_platform_inst": {
          "name": "UQ_platform_integrations_owned_by_user_platform_inst",
          "columns": [
            {
              "expression": "owned_by_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "platform",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "platform_installation_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"platform_integrations\".\"owned_by_user_id\" is not null",
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_platform_integrations_owned_by_org_id": {
          "name": "IDX_platform_integrations_owned_by_org_id",
          "columns": [
            {
              "expression": "owned_by_organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_platform_integrations_owned_by_user_id": {
          "name": "IDX_platform_integrations_owned_by_user_id",
          "columns": [
            {
              "expression": "owned_by_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_platform_integrations_platform_inst_id": {
          "name": "IDX_platform_integrations_platform_inst_id",
          "columns": [
            {
              "expression": "platform_installation_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_platform_integrations_platform": {
          "name": "IDX_platform_integrations_platform",
          "columns": [
            {
              "expression": "platform",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_platform_integrations_owned_by_org_platform": {
          "name": "IDX_platform_integrations_owned_by_org_platform",
          "columns": [
            {
              "expression": "owned_by_organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "platform",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_platform_integrations_owned_by_user_platform": {
          "name": "IDX_platform_integrations_owned_by_user_platform",
          "columns": [
            {
              "expression": "owned_by_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "platform",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_platform_integrations_integration_status": {
          "name": "IDX_platform_integrations_integration_status",
          "columns": [
            {
              "expression": "integration_status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_platform_integrations_kilo_requester": {
          "name": "IDX_platform_integrations_kilo_requester",
          "columns": [
            {
              "expression": "platform",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "kilo_requester_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "integration_status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_platform_integrations_platform_requester": {
          "name": "IDX_platform_integrations_platform_requester",
          "columns": [
            {
              "expression": "platform",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "platform_requester_account_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "integration_status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "platform_integrations_owned_by_organization_id_organizations_id_fk": {
          "name": "platform_integrations_owned_by_organization_id_organizations_id_fk",
          "tableFrom": "platform_integrations",
          "tableTo": "organizations",
          "columnsFrom": [
            "owned_by_organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "platform_integrations_owned_by_user_id_kilocode_users_id_fk": {
          "name": "platform_integrations_owned_by_user_id_kilocode_users_id_fk",
          "tableFrom": "platform_integrations",
          "tableTo": "kilocode_users",
          "columnsFrom": [
            "owned_by_user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "platform_integrations_owner_check": {
          "name": "platform_integrations_owner_check",
          "value": "(\n        (\"platform_integrations\".\"owned_by_user_id\" IS NOT NULL AND \"platform_integrations\".\"owned_by_organization_id\" IS NULL) OR\n        (\"platform_integrations\".\"owned_by_user_id\" IS NULL AND \"platform_integrations\".\"owned_by_organization_id\" IS NOT NULL)\n      )"
        }
      },
      "isRLSEnabled": false
    },
    "public.referral_code_usages": {
      "name": "referral_code_usages",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "referring_kilo_user_id": {
          "name": "referring_kilo_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "redeeming_kilo_user_id": {
          "name": "redeeming_kilo_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "amount_usd": {
          "name": "amount_usd",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "paid_at": {
          "name": "paid_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "IDX_referral_code_usages_redeeming_kilo_user_id": {
          "name": "IDX_referral_code_usages_redeeming_kilo_user_id",
          "columns": [
            {
              "expression": "redeeming_kilo_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "UQ_referral_code_usages_redeeming_user_id_code": {
          "name": "UQ_referral_code_usages_redeeming_user_id_code",
          "nullsNotDistinct": false,
          "columns": [
            "redeeming_kilo_user_id",
            "referring_kilo_user_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.referral_codes": {
      "name": "referral_codes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "kilo_user_id": {
          "name": "kilo_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "code": {
          "name": "code",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "max_redemptions": {
          "name": "max_redemptions",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 10
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "UQ_referral_codes_kilo_user_id": {
          "name": "UQ_referral_codes_kilo_user_id",
          "columns": [
            {
              "expression": "kilo_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_referral_codes_code": {
          "name": "IDX_referral_codes_code",
          "columns": [
            {
              "expression": "code",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.security_findings": {
      "name": "security_findings",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "owned_by_organization_id": {
          "name": "owned_by_organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "owned_by_user_id": {
          "name": "owned_by_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "platform_integration_id": {
          "name": "platform_integration_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "repo_full_name": {
          "name": "repo_full_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "source": {
          "name": "source",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "source_id": {
          "name": "source_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "severity": {
          "name": "severity",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "ghsa_id": {
          "name": "ghsa_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "cve_id": {
          "name": "cve_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "package_name": {
          "name": "package_name",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "package_ecosystem": {
          "name": "package_ecosystem",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "vulnerable_version_range": {
          "name": "vulnerable_version_range",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "patched_version": {
          "name": "patched_version",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "manifest_path": {
          "name": "manifest_path",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "title": {
          "name": "title",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'open'"
        },
        "ignored_reason": {
          "name": "ignored_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ignored_by": {
          "name": "ignored_by",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "fixed_at": {
          "name": "fixed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "sla_due_at": {
          "name": "sla_due_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "dependabot_html_url": {
          "name": "dependabot_html_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "cwe_ids": {
          "name": "cwe_ids",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "cvss_score": {
          "name": "cvss_score",
          "type": "numeric(3, 1)",
          "primaryKey": false,
          "notNull": false
        },
        "dependency_scope": {
          "name": "dependency_scope",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "session_id": {
          "name": "session_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "cli_session_id": {
          "name": "cli_session_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "analysis_status": {
          "name": "analysis_status",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "analysis_started_at": {
          "name": "analysis_started_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "analysis_completed_at": {
          "name": "analysis_completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "analysis_error": {
          "name": "analysis_error",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "analysis": {
          "name": "analysis",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "raw_data": {
          "name": "raw_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "first_detected_at": {
          "name": "first_detected_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "last_synced_at": {
          "name": "last_synced_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_security_findings_org_id": {
          "name": "idx_security_findings_org_id",
          "columns": [
            {
              "expression": "owned_by_organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_security_findings_user_id": {
          "name": "idx_security_findings_user_id",
          "columns": [
            {
              "expression": "owned_by_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_security_findings_repo": {
          "name": "idx_security_findings_repo",
          "columns": [
            {
              "expression": "repo_full_name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_security_findings_severity": {
          "name": "idx_security_findings_severity",
          "columns": [
            {
              "expression": "severity",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_security_findings_status": {
          "name": "idx_security_findings_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_security_findings_package": {
          "name": "idx_security_findings_package",
          "columns": [
            {
              "expression": "package_name",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_security_findings_sla_due_at": {
          "name": "idx_security_findings_sla_due_at",
          "columns": [
            {
              "expression": "sla_due_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_security_findings_session_id": {
          "name": "idx_security_findings_session_id",
          "columns": [
            {
              "expression": "session_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_security_findings_cli_session_id": {
          "name": "idx_security_findings_cli_session_id",
          "columns": [
            {
              "expression": "cli_session_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_security_findings_analysis_status": {
          "name": "idx_security_findings_analysis_status",
          "columns": [
            {
              "expression": "analysis_status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "security_findings_owned_by_organization_id_organizations_id_fk": {
          "name": "security_findings_owned_by_organization_id_organizations_id_fk",
          "tableFrom": "security_findings",
          "tableTo": "organizations",
          "columnsFrom": [
            "owned_by_organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "security_findings_owned_by_user_id_kilocode_users_id_fk": {
          "name": "security_findings_owned_by_user_id_kilocode_users_id_fk",
          "tableFrom": "security_findings",
          "tableTo": "kilocode_users",
          "columnsFrom": [
            "owned_by_user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "security_findings_platform_integration_id_platform_integrations_id_fk": {
          "name": "security_findings_platform_integration_id_platform_integrations_id_fk",
          "tableFrom": "security_findings",
          "tableTo": "platform_integrations",
          "columnsFrom": [
            "platform_integration_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "security_findings_cli_session_id_cli_sessions_session_id_fk": {
          "name": "security_findings_cli_session_id_cli_sessions_session_id_fk",
          "tableFrom": "security_findings",
          "tableTo": "cli_sessions",
          "columnsFrom": [
            "cli_session_id"
          ],
          "columnsTo": [
            "session_id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "uq_security_findings_source": {
          "name": "uq_security_findings_source",
          "nullsNotDistinct": false,
          "columns": [
            "repo_full_name",
            "source",
            "source_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "security_findings_owner_check": {
          "name": "security_findings_owner_check",
          "value": "(\n        (\"security_findings\".\"owned_by_user_id\" IS NOT NULL AND \"security_findings\".\"owned_by_organization_id\" IS NULL) OR\n        (\"security_findings\".\"owned_by_user_id\" IS NULL AND \"security_findings\".\"owned_by_organization_id\" IS NOT NULL)\n      )"
        }
      },
      "isRLSEnabled": false
    },
    "public.shared_cli_sessions": {
      "name": "shared_cli_sessions",
      "schema": "",
      "columns": {
        "share_id": {
          "name": "share_id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "session_id": {
          "name": "session_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "kilo_user_id": {
          "name": "kilo_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "shared_state": {
          "name": "shared_state",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'public'"
        },
        "api_conversation_history_blob_url": {
          "name": "api_conversation_history_blob_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "task_metadata_blob_url": {
          "name": "task_metadata_blob_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ui_messages_blob_url": {
          "name": "ui_messages_blob_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "git_state_blob_url": {
          "name": "git_state_blob_url",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "IDX_shared_cli_sessions_session_id": {
          "name": "IDX_shared_cli_sessions_session_id",
          "columns": [
            {
              "expression": "session_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_shared_cli_sessions_created_at": {
          "name": "IDX_shared_cli_sessions_created_at",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "shared_cli_sessions_session_id_cli_sessions_session_id_fk": {
          "name": "shared_cli_sessions_session_id_cli_sessions_session_id_fk",
          "tableFrom": "shared_cli_sessions",
          "tableTo": "cli_sessions",
          "columnsFrom": [
            "session_id"
          ],
          "columnsTo": [
            "session_id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        },
        "shared_cli_sessions_kilo_user_id_kilocode_users_id_fk": {
          "name": "shared_cli_sessions_kilo_user_id_kilocode_users_id_fk",
          "tableFrom": "shared_cli_sessions",
          "tableTo": "kilocode_users",
          "columnsFrom": [
            "kilo_user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "restrict",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "shared_cli_sessions_shared_state_check": {
          "name": "shared_cli_sessions_shared_state_check",
          "value": "\"shared_cli_sessions\".\"shared_state\" IN ('public', 'organization')"
        }
      },
      "isRLSEnabled": false
    },
    "public.slack_bot_requests": {
      "name": "slack_bot_requests",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "owned_by_organization_id": {
          "name": "owned_by_organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "owned_by_user_id": {
          "name": "owned_by_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "platform_integration_id": {
          "name": "platform_integration_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "slack_team_id": {
          "name": "slack_team_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "slack_team_name": {
          "name": "slack_team_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "slack_channel_id": {
          "name": "slack_channel_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "slack_user_id": {
          "name": "slack_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "slack_thread_ts": {
          "name": "slack_thread_ts",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "event_type": {
          "name": "event_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "user_message": {
          "name": "user_message",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "user_message_truncated": {
          "name": "user_message_truncated",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "response_time_ms": {
          "name": "response_time_ms",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "model_used": {
          "name": "model_used",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "tool_calls_made": {
          "name": "tool_calls_made",
          "type": "text[]",
          "primaryKey": false,
          "notNull": false
        },
        "cloud_agent_session_id": {
          "name": "cloud_agent_session_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_slack_bot_requests_created_at": {
          "name": "idx_slack_bot_requests_created_at",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_slack_bot_requests_slack_team_id": {
          "name": "idx_slack_bot_requests_slack_team_id",
          "columns": [
            {
              "expression": "slack_team_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_slack_bot_requests_owned_by_org_id": {
          "name": "idx_slack_bot_requests_owned_by_org_id",
          "columns": [
            {
              "expression": "owned_by_organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_slack_bot_requests_owned_by_user_id": {
          "name": "idx_slack_bot_requests_owned_by_user_id",
          "columns": [
            {
              "expression": "owned_by_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_slack_bot_requests_status": {
          "name": "idx_slack_bot_requests_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_slack_bot_requests_event_type": {
          "name": "idx_slack_bot_requests_event_type",
          "columns": [
            {
              "expression": "event_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_slack_bot_requests_team_created": {
          "name": "idx_slack_bot_requests_team_created",
          "columns": [
            {
              "expression": "slack_team_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "slack_bot_requests_owned_by_organization_id_organizations_id_fk": {
          "name": "slack_bot_requests_owned_by_organization_id_organizations_id_fk",
          "tableFrom": "slack_bot_requests",
          "tableTo": "organizations",
          "columnsFrom": [
            "owned_by_organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "slack_bot_requests_owned_by_user_id_kilocode_users_id_fk": {
          "name": "slack_bot_requests_owned_by_user_id_kilocode_users_id_fk",
          "tableFrom": "slack_bot_requests",
          "tableTo": "kilocode_users",
          "columnsFrom": [
            "owned_by_user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "slack_bot_requests_platform_integration_id_platform_integrations_id_fk": {
          "name": "slack_bot_requests_platform_integration_id_platform_integrations_id_fk",
          "tableFrom": "slack_bot_requests",
          "tableTo": "platform_integrations",
          "columnsFrom": [
            "platform_integration_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "slack_bot_requests_owner_check": {
          "name": "slack_bot_requests_owner_check",
          "value": "(\n        (\"slack_bot_requests\".\"owned_by_user_id\" IS NOT NULL AND \"slack_bot_requests\".\"owned_by_organization_id\" IS NULL) OR\n        (\"slack_bot_requests\".\"owned_by_user_id\" IS NULL AND \"slack_bot_requests\".\"owned_by_organization_id\" IS NOT NULL) OR\n        (\"slack_bot_requests\".\"owned_by_user_id\" IS NULL AND \"slack_bot_requests\".\"owned_by_organization_id\" IS NULL)\n      )"
        }
      },
      "isRLSEnabled": false
    },
    "public.source_embeddings": {
      "name": "source_embeddings",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "kilo_user_id": {
          "name": "kilo_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "project_id": {
          "name": "project_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "embedding": {
          "name": "embedding",
          "type": "vector(1536)",
          "primaryKey": false,
          "notNull": true
        },
        "file_path": {
          "name": "file_path",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "file_hash": {
          "name": "file_hash",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "start_line": {
          "name": "start_line",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "end_line": {
          "name": "end_line",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "git_branch": {
          "name": "git_branch",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'main'"
        },
        "is_base_branch": {
          "name": "is_base_branch",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "IDX_source_embeddings_organization_id": {
          "name": "IDX_source_embeddings_organization_id",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_source_embeddings_kilo_user_id": {
          "name": "IDX_source_embeddings_kilo_user_id",
          "columns": [
            {
              "expression": "kilo_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_source_embeddings_project_id": {
          "name": "IDX_source_embeddings_project_id",
          "columns": [
            {
              "expression": "project_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_source_embeddings_created_at": {
          "name": "IDX_source_embeddings_created_at",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_source_embeddings_updated_at": {
          "name": "IDX_source_embeddings_updated_at",
          "columns": [
            {
              "expression": "updated_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_source_embeddings_file_path_lower": {
          "name": "IDX_source_embeddings_file_path_lower",
          "columns": [
            {
              "expression": "LOWER(\"file_path\")",
              "asc": true,
              "isExpression": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_source_embeddings_git_branch": {
          "name": "IDX_source_embeddings_git_branch",
          "columns": [
            {
              "expression": "git_branch",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_source_embeddings_org_project_branch": {
          "name": "IDX_source_embeddings_org_project_branch",
          "columns": [
            {
              "expression": "organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "project_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "git_branch",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "source_embeddings_organization_id_organizations_id_fk": {
          "name": "source_embeddings_organization_id_organizations_id_fk",
          "tableFrom": "source_embeddings",
          "tableTo": "organizations",
          "columnsFrom": [
            "organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "source_embeddings_kilo_user_id_kilocode_users_id_fk": {
          "name": "source_embeddings_kilo_user_id_kilocode_users_id_fk",
          "tableFrom": "source_embeddings",
          "tableTo": "kilocode_users",
          "columnsFrom": [
            "kilo_user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "UQ_source_embeddings_org_project_branch_file_lines": {
          "name": "UQ_source_embeddings_org_project_branch_file_lines",
          "nullsNotDistinct": false,
          "columns": [
            "organization_id",
            "project_id",
            "git_branch",
            "file_path",
            "start_line",
            "end_line"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.stytch_fingerprints": {
      "name": "stytch_fingerprints",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "kilo_user_id": {
          "name": "kilo_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "visitor_fingerprint": {
          "name": "visitor_fingerprint",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "browser_fingerprint": {
          "name": "browser_fingerprint",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "browser_id": {
          "name": "browser_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "hardware_fingerprint": {
          "name": "hardware_fingerprint",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "network_fingerprint": {
          "name": "network_fingerprint",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "visitor_id": {
          "name": "visitor_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "verdict_action": {
          "name": "verdict_action",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "detected_device_type": {
          "name": "detected_device_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "is_authentic_device": {
          "name": "is_authentic_device",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "reasons": {
          "name": "reasons",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true,
          "default": "'{\"\"}'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "status_code": {
          "name": "status_code",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "fingerprint_data": {
          "name": "fingerprint_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "kilo_free_tier_allowed": {
          "name": "kilo_free_tier_allowed",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "http_x_forwarded_for": {
          "name": "http_x_forwarded_for",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "http_x_vercel_ip_city": {
          "name": "http_x_vercel_ip_city",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "http_x_vercel_ip_country": {
          "name": "http_x_vercel_ip_country",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "http_x_vercel_ip_latitude": {
          "name": "http_x_vercel_ip_latitude",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "http_x_vercel_ip_longitude": {
          "name": "http_x_vercel_ip_longitude",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "http_x_vercel_ja4_digest": {
          "name": "http_x_vercel_ja4_digest",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "http_user_agent": {
          "name": "http_user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_fingerprint_data": {
          "name": "idx_fingerprint_data",
          "columns": [
            {
              "expression": "fingerprint_data",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_hardware_fingerprint": {
          "name": "idx_hardware_fingerprint",
          "columns": [
            {
              "expression": "hardware_fingerprint",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_kilo_user_id": {
          "name": "idx_kilo_user_id",
          "columns": [
            {
              "expression": "kilo_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_reasons": {
          "name": "idx_reasons",
          "columns": [
            {
              "expression": "reasons",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_verdict_action": {
          "name": "idx_verdict_action",
          "columns": [
            {
              "expression": "verdict_action",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_visitor_fingerprint": {
          "name": "idx_visitor_fingerprint",
          "columns": [
            {
              "expression": "visitor_fingerprint",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.system_prompt_prefix": {
      "name": "system_prompt_prefix",
      "schema": "",
      "columns": {
        "system_prompt_prefix_id": {
          "name": "system_prompt_prefix_id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "system_prompt_prefix": {
          "name": "system_prompt_prefix",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "UQ_system_prompt_prefix": {
          "name": "UQ_system_prompt_prefix",
          "columns": [
            {
              "expression": "system_prompt_prefix",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.user_admin_notes": {
      "name": "user_admin_notes",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "kilo_user_id": {
          "name": "kilo_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "note_content": {
          "name": "note_content",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "admin_kilo_user_id": {
          "name": "admin_kilo_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "IDX_34517df0b385234babc38fe81b": {
          "name": "IDX_34517df0b385234babc38fe81b",
          "columns": [
            {
              "expression": "admin_kilo_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_ccbde98c4c14046daa5682ec4f": {
          "name": "IDX_ccbde98c4c14046daa5682ec4f",
          "columns": [
            {
              "expression": "kilo_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_d0270eb24ef6442d65a0b7853c": {
          "name": "IDX_d0270eb24ef6442d65a0b7853c",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.user_auth_provider": {
      "name": "user_auth_provider",
      "schema": "",
      "columns": {
        "kilo_user_id": {
          "name": "kilo_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "provider": {
          "name": "provider",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "provider_account_id": {
          "name": "provider_account_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "email": {
          "name": "email",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "avatar_url": {
          "name": "avatar_url",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "hosted_domain": {
          "name": "hosted_domain",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "IDX_user_auth_provider_kilo_user_id": {
          "name": "IDX_user_auth_provider_kilo_user_id",
          "columns": [
            {
              "expression": "kilo_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_user_auth_provider_hosted_domain": {
          "name": "IDX_user_auth_provider_hosted_domain",
          "columns": [
            {
              "expression": "hosted_domain",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {
        "user_auth_provider_provider_provider_account_id_pk": {
          "name": "user_auth_provider_provider_provider_account_id_pk",
          "columns": [
            "provider",
            "provider_account_id"
          ]
        }
      },
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.user_feedback": {
      "name": "user_feedback",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "kilo_user_id": {
          "name": "kilo_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "feedback_text": {
          "name": "feedback_text",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "feedback_for": {
          "name": "feedback_for",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'unknown'"
        },
        "feedback_batch": {
          "name": "feedback_batch",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "source": {
          "name": "source",
          "type": "text",
          "primaryKey": false,
          "notNull": true,
          "default": "'unknown'"
        },
        "context_json": {
          "name": "context_json",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "IDX_user_feedback_created_at": {
          "name": "IDX_user_feedback_created_at",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_user_feedback_kilo_user_id": {
          "name": "IDX_user_feedback_kilo_user_id",
          "columns": [
            {
              "expression": "kilo_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_user_feedback_feedback_for": {
          "name": "IDX_user_feedback_feedback_for",
          "columns": [
            {
              "expression": "feedback_for",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_user_feedback_feedback_batch": {
          "name": "IDX_user_feedback_feedback_batch",
          "columns": [
            {
              "expression": "feedback_batch",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_user_feedback_source": {
          "name": "IDX_user_feedback_source",
          "columns": [
            {
              "expression": "source",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "user_feedback_kilo_user_id_kilocode_users_id_fk": {
          "name": "user_feedback_kilo_user_id_kilocode_users_id_fk",
          "tableFrom": "user_feedback",
          "tableTo": "kilocode_users",
          "columnsFrom": [
            "kilo_user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "set null",
          "onUpdate": "cascade"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.user_period_cache": {
      "name": "user_period_cache",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "kilo_user_id": {
          "name": "kilo_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "cache_type": {
          "name": "cache_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "period_type": {
          "name": "period_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "period_key": {
          "name": "period_key",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "data": {
          "name": "data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "computed_at": {
          "name": "computed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "version": {
          "name": "version",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "shared_url_token": {
          "name": "shared_url_token",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "shared_at": {
          "name": "shared_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "IDX_user_period_cache_kilo_user_id": {
          "name": "IDX_user_period_cache_kilo_user_id",
          "columns": [
            {
              "expression": "kilo_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "UQ_user_period_cache": {
          "name": "UQ_user_period_cache",
          "columns": [
            {
              "expression": "kilo_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "cache_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "period_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "period_key",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_user_period_cache_lookup": {
          "name": "IDX_user_period_cache_lookup",
          "columns": [
            {
              "expression": "cache_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "period_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "period_key",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "UQ_user_period_cache_share_token": {
          "name": "UQ_user_period_cache_share_token",
          "columns": [
            {
              "expression": "shared_url_token",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "where": "\"user_period_cache\".\"shared_url_token\" IS NOT NULL",
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "user_period_cache_kilo_user_id_kilocode_users_id_fk": {
          "name": "user_period_cache_kilo_user_id_kilocode_users_id_fk",
          "tableFrom": "user_period_cache",
          "tableTo": "kilocode_users",
          "columnsFrom": [
            "kilo_user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "user_period_cache_period_type_check": {
          "name": "user_period_cache_period_type_check",
          "value": "\"user_period_cache\".\"period_type\" IN ('year', 'quarter', 'month', 'week', 'custom')"
        }
      },
      "isRLSEnabled": false
    },
    "public.vercel_ip_city": {
      "name": "vercel_ip_city",
      "schema": "",
      "columns": {
        "vercel_ip_city_id": {
          "name": "vercel_ip_city_id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "vercel_ip_city": {
          "name": "vercel_ip_city",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "UQ_vercel_ip_city": {
          "name": "UQ_vercel_ip_city",
          "columns": [
            {
              "expression": "vercel_ip_city",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.vercel_ip_country": {
      "name": "vercel_ip_country",
      "schema": "",
      "columns": {
        "vercel_ip_country_id": {
          "name": "vercel_ip_country_id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "vercel_ip_country": {
          "name": "vercel_ip_country",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        }
      },
      "indexes": {
        "UQ_vercel_ip_country": {
          "name": "UQ_vercel_ip_country",
          "columns": [
            {
              "expression": "vercel_ip_country",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": true,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.webhook_events": {
      "name": "webhook_events",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "pg_catalog.gen_random_uuid()"
        },
        "owned_by_organization_id": {
          "name": "owned_by_organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "owned_by_user_id": {
          "name": "owned_by_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "platform": {
          "name": "platform",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "event_type": {
          "name": "event_type",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "event_action": {
          "name": "event_action",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "payload": {
          "name": "payload",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "headers": {
          "name": "headers",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true
        },
        "processed": {
          "name": "processed",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "processed_at": {
          "name": "processed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "handlers_triggered": {
          "name": "handlers_triggered",
          "type": "text[]",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'"
        },
        "errors": {
          "name": "errors",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "event_signature": {
          "name": "event_signature",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "IDX_webhook_events_owned_by_org_id": {
          "name": "IDX_webhook_events_owned_by_org_id",
          "columns": [
            {
              "expression": "owned_by_organization_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_webhook_events_owned_by_user_id": {
          "name": "IDX_webhook_events_owned_by_user_id",
          "columns": [
            {
              "expression": "owned_by_user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_webhook_events_platform": {
          "name": "IDX_webhook_events_platform",
          "columns": [
            {
              "expression": "platform",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_webhook_events_event_type": {
          "name": "IDX_webhook_events_event_type",
          "columns": [
            {
              "expression": "event_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "IDX_webhook_events_created_at": {
          "name": "IDX_webhook_events_created_at",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "webhook_events_owned_by_organization_id_organizations_id_fk": {
          "name": "webhook_events_owned_by_organization_id_organizations_id_fk",
          "tableFrom": "webhook_events",
          "tableTo": "organizations",
          "columnsFrom": [
            "owned_by_organization_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "webhook_events_owned_by_user_id_kilocode_users_id_fk": {
          "name": "webhook_events_owned_by_user_id_kilocode_users_id_fk",
          "tableFrom": "webhook_events",
          "tableTo": "kilocode_users",
          "columnsFrom": [
            "owned_by_user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "UQ_webhook_events_signature": {
          "name": "UQ_webhook_events_signature",
          "nullsNotDistinct": false,
          "columns": [
            "event_signature"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "webhook_events_owner_check": {
          "name": "webhook_events_owner_check",
          "value": "(\n        (\"webhook_events\".\"owned_by_user_id\" IS NOT NULL AND \"webhook_events\".\"owned_by_organization_id\" IS NULL) OR\n        (\"webhook_events\".\"owned_by_user_id\" IS NULL AND \"webhook_events\".\"owned_by_organization_id\" IS NOT NULL)\n      )"
        }
      },
      "isRLSEnabled": false
    }
  },
  "enums": {},
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {
    "public.microdollar_usage_view": {
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "kilo_user_id": {
          "name": "kilo_user_id",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "message_id": {
          "name": "message_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "cost": {
          "name": "cost",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "input_tokens": {
          "name": "input_tokens",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "output_tokens": {
          "name": "output_tokens",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "cache_write_tokens": {
          "name": "cache_write_tokens",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "cache_hit_tokens": {
          "name": "cache_hit_tokens",
          "type": "bigint",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "http_x_forwarded_for": {
          "name": "http_x_forwarded_for",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "http_x_vercel_ip_city": {
          "name": "http_x_vercel_ip_city",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "http_x_vercel_ip_country": {
          "name": "http_x_vercel_ip_country",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "http_x_vercel_ip_latitude": {
          "name": "http_x_vercel_ip_latitude",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "http_x_vercel_ip_longitude": {
          "name": "http_x_vercel_ip_longitude",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "http_x_vercel_ja4_digest": {
          "name": "http_x_vercel_ja4_digest",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "provider": {
          "name": "provider",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "model": {
          "name": "model",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "requested_model": {
          "name": "requested_model",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "user_prompt_prefix": {
          "name": "user_prompt_prefix",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "system_prompt_prefix": {
          "name": "system_prompt_prefix",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "system_prompt_length": {
          "name": "system_prompt_length",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "http_user_agent": {
          "name": "http_user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "cache_discount": {
          "name": "cache_discount",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "max_tokens": {
          "name": "max_tokens",
          "type": "bigint",
          "primaryKey": false,
          "notNull": false
        },
        "has_middle_out_transform": {
          "name": "has_middle_out_transform",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "has_error": {
          "name": "has_error",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true
        },
        "abuse_classification": {
          "name": "abuse_classification",
          "type": "smallint",
          "primaryKey": false,
          "notNull": true
        },
        "organization_id": {
          "name": "organization_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "inference_provider": {
          "name": "inference_provider",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "project_id": {
          "name": "project_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "status_code": {
          "name": "status_code",
          "type": "smallint",
          "primaryKey": false,
          "notNull": false
        },
        "upstream_id": {
          "name": "upstream_id",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "finish_reason": {
          "name": "finish_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "latency": {
          "name": "latency",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "moderation_latency": {
          "name": "moderation_latency",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "generation_time": {
          "name": "generation_time",
          "type": "real",
          "primaryKey": false,
          "notNull": false
        },
        "is_byok": {
          "name": "is_byok",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "is_user_byok": {
          "name": "is_user_byok",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "streamed": {
          "name": "streamed",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "cancelled": {
          "name": "cancelled",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        },
        "editor_name": {
          "name": "editor_name",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "has_tools": {
          "name": "has_tools",
          "type": "boolean",
          "primaryKey": false,
          "notNull": false
        }
      },
      "definition": "\n  SELECT\n    mu.id,\n    mu.kilo_user_id,\n    meta.message_id,\n    mu.cost,\n    mu.input_tokens,\n    mu.output_tokens,\n    mu.cache_write_tokens,\n    mu.cache_hit_tokens,\n    mu.created_at,\n    ip.http_ip AS http_x_forwarded_for,\n    city.vercel_ip_city AS http_x_vercel_ip_city,\n    country.vercel_ip_country AS http_x_vercel_ip_country,\n    meta.vercel_ip_latitude AS http_x_vercel_ip_latitude,\n    meta.vercel_ip_longitude AS http_x_vercel_ip_longitude,\n    ja4.ja4_digest AS http_x_vercel_ja4_digest,\n    mu.provider,\n    mu.model,\n    mu.requested_model,\n    meta.user_prompt_prefix,\n    spp.system_prompt_prefix,\n    meta.system_prompt_length,\n    ua.http_user_agent,\n    mu.cache_discount,\n    meta.max_tokens,\n    meta.has_middle_out_transform,\n    mu.has_error,\n    mu.abuse_classification,\n    mu.organization_id,\n    mu.inference_provider,\n    mu.project_id,\n    meta.status_code,\n    meta.upstream_id,\n    frfr.finish_reason,\n    meta.latency,\n    meta.moderation_latency,\n    meta.generation_time,\n    meta.is_byok,\n    meta.is_user_byok,\n    meta.streamed,\n    meta.cancelled,\n    edit.editor_name,\n    meta.has_tools\n  FROM \"microdollar_usage\" mu\n  LEFT JOIN \"microdollar_usage_metadata\" meta ON mu.id = meta.id\n  LEFT JOIN \"http_ip\" ip ON meta.http_ip_id = ip.http_ip_id\n  LEFT JOIN \"vercel_ip_city\" city ON meta.vercel_ip_city_id = city.vercel_ip_city_id\n  LEFT JOIN \"vercel_ip_country\" country ON meta.vercel_ip_country_id = country.vercel_ip_country_id\n  LEFT JOIN \"ja4_digest\" ja4 ON meta.ja4_digest_id = ja4.ja4_digest_id\n  LEFT JOIN \"system_prompt_prefix\" spp ON meta.system_prompt_prefix_id = spp.system_prompt_prefix_id\n  LEFT JOIN \"http_user_agent\" ua ON meta.http_user_agent_id = ua.http_user_agent_id\n  LEFT JOIN \"finish_reason\" frfr ON meta.finish_reason_id = frfr.finish_reason_id\n  LEFT JOIN \"editor_name\" edit ON meta.editor_name_id = edit.editor_name_id\n",
      "name": "microdollar_usage_view",
      "schema": "public",
      "isExisting": false,
      "materialized": false
    }
  },
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}